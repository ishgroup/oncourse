apply plugin: 'war'

dependencies {
    providedCompile 'javax.servlet:servlet-api:3.0'

	compile (project(':common:common-ui')) {
		exclude group: 'org.apache.solr'
	}
	//web and cms application use java 7, and cannot use solr 6+
	compile group: 'org.apache.solr', name: 'solr-solrj', version: '5.5.4'

	compile 'commons-logging:commons-logging:1.1.1'
	compile 'org.apache.tapestry:tapestry-upload:5.2.6'
	compile 'commons-httpclient:commons-httpclient:3.1'

	// The odd next line is to work around gradle pulling in the wrong configuration
	// http://forums.gradle.org/gradle/topics/transitive_libraries_not_included_through_project_dependency
	testCompile project(path: ':common:common-test', configuration: 'testFixtures')	
}

war {
	archiveName = 'web.war'
	manifest {
		from sharedManifest
	}

	from 'build/resource-assemble'
	from 'build/resource'
	from ('src/main/static') {
		exclude 'js'
		exclude 'src'
	}
}