<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<t:container xmlns:t="http://tapestry.apache.org/schema/tapestry_5_1_0.xsd">
	<div class="class_details">
		<ul class="class_timetable" title="View calendar">
			<t:if t:test="courseClass.hasSessions">
				<li class="class_date">
					<a class="timeline" rel="session" href="${'/Timeline/sessions?ids=' + courseClass.id}" timezone="10"> <wo:DateRangeDisplay date1="$object.startDate" date2="$object.endDate" timezone="$object.timeZone" /> </a>
				</li>
				<li class="class_time">
				</li>
				<t:if t:test="courseClass.hasManySessions">
			
				</t:if>
			</t:if>
		</ul>
	</div>
</t:container>




<wo:if condition="$object.hasCode">
  <div class="class_details clearfix trigger">
    <ul class="~'class_timedate' + (hasSessions ? ' tooltip' : '')" title="View calendar">
      <wo:if condition="$hasSessions">
        <li class="class_date">
          <a class="timeline" rel="session" href="~'/Timeline/sessions?ids=' + object.primaryKey" timezone="10"> <wo:DateRangeDisplay date1="$object.startDate" date2="$object.endDate" timezone="$object.timeZone" /> </a>
        </li>
        <li class="class_time">
          <a class="timeline" rel="session" href="~'/Timeline/sessions?ids=' + object.primaryKey" timezone="10">
           <span style="text-transform: lowercase;">
              <wo:WillowText escapeHTML="$false" value="$object.firstSession.startTimestamp" dateformat="~#m = object.firstSession.startTimestamp.minuteOfHour, (#m==0 ? 'ha' : 'h:mma')" timezone="$object.timeZone" valueWhenEmpty="TBA" />
              &ndash; 
              <wo:WillowText escapeHTML="$false" value="$object.firstSession.endTimestamp" dateformat="~#m = object.firstSession.endTimestamp.minuteOfHour, (#m==0 ? 'ha' : 'h:mma')" timezone="$object.timeZone" valueWhenEmpty="TBA" />
            </span>
            <wo:if condition="$hasManySessions">
              <span class="class_session_exp">(<wo:if condition="$object.sessionsHaveDifferentTimes">first session</wo:if><wo:else>all sessions</wo:else>)</span>
            </wo:if>
          </a>
        </li>
        <wo:if condition="$hasManySessions">
          <li class="class_session">
            <a class="timeline" rel="session" href="~'/Timeline/sessions?ids=' + object.primaryKey" timezone="10">
              <wo:string value="$sessionsCount" /> sessions, 
               <wo:string value="$object.totalDurationHours" numberformat="0.#" /> hours total </a>
          </li>
        </wo:if>
      </wo:if>
      <wo:else>
        <li class="class_date"><wo:DateRangeDisplay date1="$object.startDate" date2="$object.endDate" timezone="$object.timeZone" /></li>
        <li class="class_time">
          <span style="text-transform: lowercase;">
            <wo:WillowText escapeHTML="$false" value="$object.startDate" dateformat="~#m = object.startDate.minuteOfHour, (#m==0 ? 'ha' : 'h:mma')" timezone="$object.timeZone" valueWhenEmpty="TBA" />
            &ndash; 
            <wo:WillowText escapeHTML="$false" value="$object.endDate" dateformat="~#m = object.endDate.minuteOfHour, (#m==0 ? 'ha' : 'h:mma')" timezone="$object.timeZone" valueWhenEmpty="TBA" />
          </span>
        </li>
      </wo:else>
    </ul>
    <ul class="class_locationtutor">
      <li class="class_location">
        <wo:if condition="~linkToLocationsMap and isListPage">
          <wo:if condition="$hasSiteSuburb" negate="$true">
            <dd>TBA</dd>
          </wo:if>
          <wo:else>
            <wo:genericContainer omitTags="$hasNoSite" elementName="a" href="#" onclick="~'showSiteOnMap(' + object.room.site.id + ');'" title="Show venue on map" class="tooltip"> <wo:string value="$siteSuburb" /> </wo:genericContainer>
          </wo:else>
        </wo:if>
        <wo:else>
          <wo:if condition="$hasSite" negate="$true">TBA</wo:if>
          <wo:else><wo:RoomLocation object="$object" withRoomName="$false" disabledLink="$false" /></wo:else>
        </wo:else>
      </li>
      <wo:if condition="$object.tutorRoles.@count">
        <li class="class_tutor">
          <wo:loop list="$object.tutorRoles.tutor" item="$listItem" index="$listIndex">
            <a class="~'tutorlink tooltip nyromodal tutorlink' + listIndex" href="~'/Refresh/tutor?x=Detail&id1=' + listItem.id + '&z=z&wrap=false'" title="View tutor profile"> <wo:string value="$listItem.fullName" /></a>
          </wo:loop>
        </li>
      </wo:if>
      <wo:if condition="$^excludePrice" negate="$true">
        <li><wo:CourseClassPrice object="$object" /></li>
      </wo:if>
    </ul>
    <wo:content />
    <wo:not condition="$isTutorPortal">
      <wo:CourseClassShortlistControl object="$object" />
    </wo:not>
    <wo:if condition="$object.detail.length">
      <div class="detail_for_class" id="~'detail_for_class_' + object.id" style="clear:both;">
        <p class="class_detail"><wo:string value="$object.detail" escapeHTML="$false" /></p>
      </div>
    </wo:if>
    <wo:not condition="$object.isCancelled">
      <div class="bubbleInfo">
        <div class="tooltip_popup enrol_tooltip">
          <div class="bubble_top bubble_content clearfix"><wo:ClassTimingDisplay object="$object" /></div>
          <div class="bubble_middle bubble_content clearfix">
            <wo:if condition="$object.hasAvailableEnrolmentPlaces">
              <wo:CourseClassPlacesAvailable object="$object" />
              <wo:if condition="~#n=object.room.site.name,#n!=null and !'online'.equals(#n.toLowerCase)"> at <wo:string value="$object.room.site.name" /></wo:if>. 
            </wo:if>
            <wo:else> <wo:WaitingListItem course="$object.course" class="$object" /> 
            	<br style="clear:left;"/>
            </wo:else>
            <div class="class-link">
              <wo:DynamicDirectAction object="$object">Print this class...</wo:DynamicDirectAction>
            </div>
            <div class="course-link">
              <wo:DynamicDirectAction object="$object.course">More about 
                <em><wo:string value="$object.course.name" /></em>...</wo:DynamicDirectAction>
            </div>
          </div>
          <div class="bubble_bottom clearfix">&nbsp;</div>
          <br style="clear:both;" />
        </div>
      </div>
      <!-- sessions for all classes, displayed for tutor portal, hidden otherwise -->
      <wo:if condition="$object.hasAnyTimelineableSessions">
        <div id="~'sessions_for_class_' + object.id" class="~'sessions_for_class' + (isTutorPortal ? '' : ' hidden')"> <wo:TimetableEvents displayedObjects="$object.timelineableSessions.@sort.room.site.name,startTimestamp" headerLabels="When,Time,Where" cssTableClass="session-table" cssEvenRowClass="tr-even" cssOddRowClass="tr-odd" dateFormat="EEE dd MMM yyyy" timeFormat="hh:mma" /> </div>
      </wo:if>
    </wo:not>
  </div>
</wo:if>