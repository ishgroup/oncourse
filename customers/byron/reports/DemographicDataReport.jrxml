<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Copyright ish group pty ltd. All rights reserved. https://www.ish.com.au
  ~ No copying or use of this code is allowed without permission in writing from ish.
  -->

<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="DemographicDataReport" language="groovy" pageWidth="595" pageHeight="842" columnWidth="539" leftMargin="28" rightMargin="28" topMargin="28" bottomMargin="28">
    <property name="name" value="Demographic Data Report"/>
    <property name="entity" value="Enrolment"/>
    <property name="isSubreport" value="false"/>
    <property name="isVisible" value="true"/>
    <property name="versionNumber" value="3"/>
    <property name="keyCode" value="ish.onCourse.demographicData"/>
    <property name="ish.oncourse.description" value="Demographic Data Report"/>
    <import value="net.sf.jasperreports.engine.*"/>
    <import value="java.util.*"/>
    <import value="ish.common.types.*"/>
    <import value="ish.util.Textile"/>
    <import value="net.sf.jasperreports.engine.data.*"/>
    <style name="default" isDefault="true" forecolor="#000000" vTextAlign="Bottom" markup="none" fontName="Open Sans" fontSize="9" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="OpenSans" pdfEncoding="Cp1252" isPdfEmbedded="true">
        <paragraph spacingAfter="8"/>
    </style>
    <style name="header 1" style="default" forecolor="#4F0018" vTextAlign="Middle" fontName="Open Sans Light" fontSize="18" pdfFontName="Open Sans Light"/>
    <style name="header 2" style="header 1" fontSize="12"/>
    <style name="header 3" style="default" vTextAlign="Middle" fontName="Open Sans Semibold" pdfFontName="Open Sans Semibold"/>
    <style name="header 3 (right)" style="header 3" hTextAlign="Right"/>
    <style name="Label" style="default" forecolor="#6A7E99"/>
    <style name="Label right" style="Label" hTextAlign="Right"/>
    <style name="data field" style="default"/>
    <style name="data field (money)" style="data field" hTextAlign="Right" pattern="$#,###,##0.00;$(-#,###,##0.00)"/>
    <style name="data field (numeric)" style="data field" hTextAlign="Right"/>
    <style name="data field (datetime)" style="data field" pattern="d MMM yyyy h:mma"/>
    <style name="data field (day)" style="data field" pattern="E d MMM h:mma"/>
    <style name="data field (date)" style="data field" pattern="d MMM yyyy"/>
    <style name="Footer" style="default" forecolor="#737373" fontSize="8"/>
    <style name="Footer strong" style="Footer" fontName="Open Sans Semibold" pdfFontName="Open Sans Semibold"/>
    <style name="subHead box" style="default" backcolor="#E6E7F0"/>
    <style name="crosstab" mode="Opaque" backcolor="#F7F2E9">
        <box>
            <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#A3A3A3"/>
            <leftPen lineWidth="0.2" lineStyle="Solid" lineColor="#A3A3A3"/>
            <bottomPen lineWidth="0.2" lineStyle="Solid" lineColor="#A3A3A3"/>
            <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#A3A3A3"/>
        </box>
        <conditionalStyle>
            <conditionExpression><![CDATA[$V{ROW_COUNT}.intValue() % 2 == 1 ? Boolean.TRUE : Boolean.FALSE]]></conditionExpression>
            <style mode="Opaque" backcolor="#FFFFFF"/>
        </conditionalStyle>
    </style>
    <style name="alternateRow" mode="Opaque" forecolor="rgba(255, 255, 255, 0.0)" backcolor="#F7F2E9">
        <box>
            <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
            <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
            <bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
            <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
        </box>
        <conditionalStyle>
            <conditionExpression><![CDATA[$V{PAGE_COUNT}.intValue() % 2 == 1 ? Boolean.TRUE : Boolean.FALSE]]></conditionExpression>
            <style mode="Opaque" backcolor="#FFFFFF"/>
        </conditionalStyle>
    </style>
    <parameter name="ReportName" class="java.lang.String"/>
    <field name="enrolment" class="java.lang.Object"/>
    <field name="image.poweredby" class="java.io.InputStream"/>

    <variable name="enrolmentsCount" class="java.lang.Integer" calculation="Count">
        <variableExpression><![CDATA[$F{enrolment}.id]]></variableExpression>
    </variable>
    <variable name="courseClassCount" class="java.lang.Integer" calculation="DistinctCount">
        <variableExpression><![CDATA[$F{enrolment}.courseClass.uniqueCode]]></variableExpression>
    </variable>

    <variable name="male" class="java.lang.Integer" calculation="Sum">
        <variableExpression><![CDATA[$F{enrolment}.student.contact.isMale == true ? 1 : 0]]></variableExpression>
    </variable>
    <variable name="female" class="java.lang.Integer" calculation="Sum">
        <variableExpression><![CDATA[$F{enrolment}.student.contact.isMale == false ? 1 : 0]]></variableExpression>
    </variable>
    <variable name="unknownGender" class="java.lang.Integer" calculation="Sum">
        <variableExpression><![CDATA[$F{enrolment}.student.contact.isMale == null ? 1 : 0]]></variableExpression>
    </variable>

    <variable name="unknownAge" class="java.lang.Integer" calculation="Sum">
        <variableExpression><![CDATA[$F{enrolment}.student.contact.age < 0 ? 1 : 0]]></variableExpression>
    </variable>
    <variable name="under10" class="java.lang.Integer" calculation="Sum">
        <variableExpression><![CDATA[$F{enrolment}.student.contact.age > 0 && $F{enrolment}.student.contact.age <=10 ? 1 : 0]]></variableExpression>
    </variable>
    <variable name="under20" class="java.lang.Integer" calculation="Sum">
        <variableExpression><![CDATA[$F{enrolment}.student.contact.age > 10 && $F{enrolment}.student.contact.age <=20 ? 1 : 0]]></variableExpression>
    </variable>
    <variable name="under30" class="java.lang.Integer" calculation="Sum">
        <variableExpression><![CDATA[$F{enrolment}.student.contact.age > 20 && $F{enrolment}.student.contact.age <=30 ? 1 : 0]]></variableExpression>
    </variable>
    <variable name="under40" class="java.lang.Integer" calculation="Sum">
        <variableExpression><![CDATA[$F{enrolment}.student.contact.age > 30 && $F{enrolment}.student.contact.age <=40 ? 1 : 0]]></variableExpression>
    </variable>
    <variable name="under50" class="java.lang.Integer" calculation="Sum">
        <variableExpression><![CDATA[$F{enrolment}.student.contact.age > 40 && $F{enrolment}.student.contact.age <=50 ? 1 : 0]]></variableExpression>
    </variable>
    <variable name="under60" class="java.lang.Integer" calculation="Sum">
        <variableExpression><![CDATA[$F{enrolment}.student.contact.age > 50 && $F{enrolment}.student.contact.age <=60 ? 1 : 0]]></variableExpression>
    </variable>
    <variable name="under70" class="java.lang.Integer" calculation="Sum">
        <variableExpression><![CDATA[$F{enrolment}.student.contact.age > 60 && $F{enrolment}.student.contact.age <=70 ? 1 : 0]]></variableExpression>
    </variable>
    <variable name="under80" class="java.lang.Integer" calculation="Sum">
        <variableExpression><![CDATA[$F{enrolment}.student.contact.age > 70 && $F{enrolment}.student.contact.age <=80 ? 1 : 0]]></variableExpression>
    </variable>
    <variable name="over80" class="java.lang.Integer" calculation="Sum">
        <variableExpression><![CDATA[$F{enrolment}.student.contact.age > 80 ? 1 : 0]]></variableExpression>
    </variable>

    <variable name="suburbMap" class="java.util.HashMap" calculation="System">
        <initialValueExpression><![CDATA[new java.util.HashMap()]]></initialValueExpression>
    </variable>
    <variable name="suburbMapCalculation" class="java.lang.Object" calculation="System">
        <variableExpression><![CDATA[$F{enrolment}.student.contact.suburb?.trim()?
$V{suburbMap}.put($F{enrolment}.student.contact.suburb?.toLowerCase(), ($V{suburbMap}.get($F{enrolment}.student.contact.suburb?.toLowerCase()) ?: 0) + 1) : ""]]></variableExpression>
        <initialValueExpression><![CDATA[$F{enrolment}.student.contact.suburb?.trim() ?
$V{suburbMap}.put($F{enrolment}.student.contact.suburb?.toLowerCase(), ($V{suburbMap}.get($F{enrolment}.student.contact.suburb?.toLowerCase()) ?: 0) + 2) : ""]]>
        </initialValueExpression>
    </variable>
    <variable name="notStated" class="java.lang.Integer" calculation="Sum">
        <variableExpression><![CDATA[$F{enrolment}.student.contact.suburb?.trim() ? 0 : 1]]></variableExpression>
    </variable>


    <variable name="countryMap" class="java.util.HashMap" calculation="System">
        <initialValueExpression><![CDATA[new java.util.HashMap()]]></initialValueExpression>
    </variable>
    <variable name="countryMapCalculation" class="java.lang.Object" calculation="System">
        <variableExpression><![CDATA[$F{enrolment}.student.countryOfBirth?.name?.toLowerCase()?
$V{countryMap}.put($F{enrolment}.student.countryOfBirth?.name?.toLowerCase(), ($V{countryMap}.get($F{enrolment}.student.countryOfBirth?.name?.toLowerCase()) ?: 0) + 1) : ""]]></variableExpression>
        <initialValueExpression><![CDATA[$F{enrolment}.student.contact.suburb?.trim() ?
$V{countryMap}.put($F{enrolment}.student.countryOfBirth?.name?.toLowerCase(), ($V{countryMap}.get($F{enrolment}.student.countryOfBirth?.name?.toLowerCase()) ?: 0) + 2) : ""]]>
        </initialValueExpression>
    </variable>
    <variable name="unknownCountry" class="java.lang.Integer" calculation="Sum">
        <variableExpression><![CDATA[$F{enrolment}.student.countryOfBirth?.name?.toLowerCase() ? 0 : 1]]></variableExpression>
    </variable>

    <variable name="lMap" class="java.util.HashMap" calculation="System">
        <initialValueExpression><![CDATA[new java.util.HashMap()]]></initialValueExpression>
    </variable>
    <variable name="lMapCalculation" class="java.lang.Object" calculation="System">
        <variableExpression><![CDATA[$F{enrolment}.student.language?.name?.toLowerCase()?
$V{lMap}.put($F{enrolment}.student.language?.name?.toLowerCase(), ($V{lMap}.get($F{enrolment}.student.language?.name?.toLowerCase()) ?: 0) + 1) : ""]]></variableExpression>
        <initialValueExpression><![CDATA[$F{enrolment}.student.contact.suburb?.trim() ?
$V{lMap}.put($F{enrolment}.student.language?.name?.toLowerCase(), ($V{lMap}.get($F{enrolment}.student.language?.name?.toLowerCase()) ?: 0) + 2) : ""]]>
        </initialValueExpression>
    </variable>
    <variable name="unknownLanguage" class="java.lang.Integer" calculation="Sum">
        <variableExpression><![CDATA[$F{enrolment}.student.language == null ? 1 : 0]]></variableExpression>
    </variable>

    <group name="language" >
        <groupExpression><![CDATA[null]]></groupExpression>
        <groupFooter>
            <band height="300" splitType="Stretch">
                <property name="com.jaspersoft.studio.unit.height" value="pixel"/>
                <staticText>
                    <reportElement style="data field" x="1" y="1" width="312" height="20"/>
                    <textElement>
                        <font isBold="true"/>
                    </textElement>
                    <text><![CDATA[Language spoken at home]]></text>
                </staticText>

                <line>
                    <reportElement style="Footer" x="1" y="25" width="482" height="1"/>
                    <graphicElement>
                        <pen lineWidth="0.5"/>
                    </graphicElement>
                </line>

                <textField>
                    <reportElement style="data field" x="1" y="21" width="312" height="20"/>
                    <textFieldExpression><![CDATA[$V{lMap}.toSorted().keySet().getAt(-1) ?: "-"]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="360" y="21" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{lMap}.toSorted().values().getAt(-1) ? $V{lMap}.toSorted().values().getAt(-1)/3 : 0]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="21" width="40" height="20"/>
                    <textFieldExpression><![CDATA[($V{lMap}.toSorted().values().getAt(-1) ? Math.round($V{lMap}.toSorted().values().getAt(-1)/3/$V{enrolmentsCount}*10000)/100 : 0) + "%"]]></textFieldExpression>
                </textField>

                <textField>
                    <reportElement style="data field" x="1" y="41" width="312" height="20"/>
                    <textFieldExpression><![CDATA[$V{lMap}.toSorted().keySet().getAt(-2) ?: "-"]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="360" y="41" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{lMap}.toSorted().values().getAt(-2) ? $V{lMap}.toSorted().values().getAt(-2)/3 : 0]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="41" width="40" height="20"/>
                    <textFieldExpression><![CDATA[($V{lMap}.toSorted().values().getAt(-2) ? Math.round($V{lMap}.toSorted().values().getAt(-2)/3/$V{enrolmentsCount}*10000)/100 : 0) + "%"]]></textFieldExpression>
                </textField>

                <textField>
                    <reportElement style="data field" x="1" y="61" width="312" height="20"/>
                    <textFieldExpression><![CDATA[$V{lMap}.toSorted().keySet().getAt(-3) ?: "-"]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="360" y="61" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{lMap}.toSorted().values().getAt(-3) ? $V{lMap}.toSorted().values().getAt(-3)/3 : 0]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="61" width="40" height="20"/>
                    <textFieldExpression><![CDATA[($V{lMap}.toSorted().values().getAt(-3) ? Math.round($V{lMap}.toSorted().values().getAt(-3)/3/$V{enrolmentsCount}*10000)/100 : 0) + "%"]]></textFieldExpression>
                </textField>

                <textField>
                    <reportElement style="data field" x="1" y="81" width="312" height="20"/>
                    <textFieldExpression><![CDATA[$V{lMap}.toSorted().keySet().getAt(-4) ?: "-"]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="360" y="81" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{lMap}.toSorted().values().getAt(-4) ? $V{lMap}.toSorted().values().getAt(-4)/3 : 0]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="81" width="40" height="20"/>
                    <textFieldExpression><![CDATA[($V{lMap}.toSorted().values().getAt(-4) ? Math.round($V{lMap}.toSorted().values().getAt(-4)/3/$V{enrolmentsCount}*10000)/100 : 0) + "%"]]></textFieldExpression>
                </textField>

                <textField>
                    <reportElement style="data field" x="1" y="101" width="312" height="20"/>
                    <textFieldExpression><![CDATA[$V{lMap}.toSorted().keySet().getAt(-5) ?: "-"]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="360" y="101" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{lMap}.toSorted().values().getAt(-5) ? $V{lMap}.toSorted().values().getAt(-5)/3 : 0]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="101" width="40" height="20"/>
                    <textFieldExpression><![CDATA[($V{lMap}.toSorted().values().getAt(-5) ? Math.round($V{lMap}.toSorted().values().getAt(-5)/3/$V{enrolmentsCount}*10000)/100 : 0) + "%"]]></textFieldExpression>
                </textField>

                <textField>
                    <reportElement style="data field" x="1" y="121" width="312" height="20"/>
                    <textFieldExpression><![CDATA[$V{lMap}.toSorted().keySet().getAt(-6) ?: "-"]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="360" y="121" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{lMap}.toSorted().values().getAt(-6) ? $V{lMap}.toSorted().values().getAt(-6)/3 : 0]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="121" width="40" height="20"/>
                    <textFieldExpression><![CDATA[($V{lMap}.toSorted().values().getAt(-6) ? Math.round($V{lMap}.toSorted().values().getAt(-6)/3/$V{enrolmentsCount}*10000)/100 : 0) + "%"]]></textFieldExpression>
                </textField>

                <textField>
                    <reportElement style="data field" x="1" y="141" width="312" height="20"/>
                    <textFieldExpression><![CDATA[$V{lMap}.toSorted().keySet().getAt(-7) ?: "-"]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="360" y="141" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{lMap}.toSorted().values().getAt(-7) ? $V{lMap}.toSorted().values().getAt(-7)/3 : 0]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="141" width="40" height="20"/>
                    <textFieldExpression><![CDATA[($V{lMap}.toSorted().values().getAt(-7) ? Math.round($V{lMap}.toSorted().values().getAt(-7)/3/$V{enrolmentsCount}*10000)/100 : 0) + "%"]]></textFieldExpression>
                </textField>

                <textField>
                    <reportElement style="data field" x="1" y="161" width="312" height="20"/>
                    <textFieldExpression><![CDATA[$V{lMap}.toSorted().keySet().getAt(-8) ?: "-"]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="360" y="161" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{lMap}.toSorted().values().getAt(-8) ? $V{lMap}.toSorted().values().getAt(-8)/3 : 0]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="161" width="40" height="20"/>
                    <textFieldExpression><![CDATA[($V{lMap}.toSorted().values().getAt(-8) ? Math.round($V{lMap}.toSorted().values().getAt(-8)/3/$V{enrolmentsCount}*10000)/100 : 0) + "%"]]></textFieldExpression>
                </textField>

                <textField>
                    <reportElement style="data field" x="1" y="181" width="312" height="20"/>
                    <textFieldExpression><![CDATA[$V{lMap}.toSorted().keySet().getAt(-9) ?: "-"]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="360" y="181" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{lMap}.toSorted().values().getAt(-9) ? $V{lMap}.toSorted().values().getAt(-9)/3 : 0]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="181" width="40" height="20"/>
                    <textFieldExpression><![CDATA[($V{lMap}.toSorted().values().getAt(-9) ? Math.round($V{lMap}.toSorted().values().getAt(-9)/3/$V{enrolmentsCount}*10000)/100 : 0) + "%"]]></textFieldExpression>
                </textField>

                <textField>
                    <reportElement style="data field" x="1" y="201" width="312" height="20"/>
                    <textFieldExpression><![CDATA[$V{lMap}.toSorted().keySet().getAt(-10) ?: "-"]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="360" y="201" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{lMap}.toSorted().values().getAt(-10) ? $V{lMap}.toSorted().values().getAt(-10)/3 : 0]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="201" width="40" height="20"/>
                    <textFieldExpression><![CDATA[($V{lMap}.toSorted().values().getAt(-10) ? Math.round($V{lMap}.toSorted().values().getAt(-10)/3/$V{enrolmentsCount}*10000)/100 : 0) + "%"]]></textFieldExpression>
                </textField>

                <staticText>
                    <reportElement style="data field" x="1" y="221" width="312" height="20"/>
                    <text><![CDATA[Not stated]]></text>
                </staticText>
                <textField>
                    <reportElement style="data field" x="360" y="221" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{unknownLanguage}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="221" width="40" height="20"/>
                    <textFieldExpression><![CDATA[Math.round($V{unknownLanguage}/$V{enrolmentsCount}*10000)/100 + "%"]]></textFieldExpression>
                </textField>

                <staticText>
                    <reportElement style="data field" x="1" y="241" width="312" height="20"/>
                    <text><![CDATA[Other]]></text>
                </staticText>
                <textField>
                    <reportElement style="data field" x="360" y="241" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{lMap}.size() > 10 ? $V{lMap}.toSorted().values().toList().subList(0, $V{lMap}.size() - 10).sum()/3 : 0]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="241" width="40" height="20"/>
                    <textFieldExpression><![CDATA[($V{lMap}.size() > 10 ? Math.round(($V{lMap}.toSorted().values().toList().subList(0, $V{lMap}.size() - 10).sum()/3)/$V{enrolmentsCount}*10000)/100 : 0)+ "%"]]></textFieldExpression>
                </textField>

                <line>
                    <reportElement style="Footer" x="1" y="265" width="482" height="1"/>
                    <graphicElement>
                        <pen lineWidth="0.5"/>
                    </graphicElement>
                </line>

                <textField>
                    <reportElement style="data field" x="360" y="261" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{enrolmentsCount}]]></textFieldExpression>
                </textField>
                <staticText>
                    <reportElement style="data field" x="440" y="261" width="112" height="20"/>
                    <text><![CDATA[100%]]></text>
                </staticText>
            </band>
        </groupFooter>
    </group>
    <group name="country">
        <groupExpression><![CDATA[null]]></groupExpression>
        <groupFooter>
            <band height="300" splitType="Stretch">
                <property name="com.jaspersoft.studio.unit.height" value="pixel"/>
                <staticText>
                    <reportElement style="data field" x="1" y="1" width="312" height="20"/>
                    <textElement>
                        <font isBold="true"/>
                    </textElement>
                    <text><![CDATA[Country of Birth]]></text>
                </staticText>

                <line>
                    <reportElement style="Footer" x="1" y="25" width="482" height="1"/>
                    <graphicElement>
                        <pen lineWidth="0.5"/>
                    </graphicElement>
                </line>

                <textField>
                    <reportElement style="data field" x="1" y="21" width="312" height="20"/>
                    <textFieldExpression><![CDATA[$V{countryMap}.toSorted().keySet().getAt(-1) ?: "-"]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="360" y="21" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{countryMap}.toSorted().values().getAt(-1) ? $V{countryMap}.toSorted().values().getAt(-1)/3 : 0]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="21" width="40" height="20"/>
                    <textFieldExpression><![CDATA[($V{countryMap}.toSorted().values().getAt(-1) ? Math.round($V{countryMap}.toSorted().values().getAt(-1)/3/$V{enrolmentsCount}*10000)/100 : 0) + "%"]]></textFieldExpression>
                </textField>

                <textField>
                    <reportElement style="data field" x="1" y="41" width="312" height="20"/>
                    <textFieldExpression><![CDATA[$V{countryMap}.toSorted().keySet().getAt(-2) ?: "-"]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="360" y="41" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{countryMap}.toSorted().values().getAt(-2) ? $V{countryMap}.toSorted().values().getAt(-2)/3 : 0]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="41" width="40" height="20"/>
                    <textFieldExpression><![CDATA[($V{countryMap}.toSorted().values().getAt(-2) ? Math.round($V{countryMap}.toSorted().values().getAt(-2)/3/$V{enrolmentsCount}*10000)/100 : 0) + "%"]]></textFieldExpression>
                </textField>

                <textField>
                    <reportElement style="data field" x="1" y="61" width="312" height="20"/>
                    <textFieldExpression><![CDATA[$V{countryMap}.toSorted().keySet().getAt(-3) ?: "-"]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="360" y="61" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{countryMap}.toSorted().values().getAt(-3) ? $V{countryMap}.toSorted().values().getAt(-3)/3 : 0]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="61" width="40" height="20"/>
                    <textFieldExpression><![CDATA[($V{countryMap}.toSorted().values().getAt(-3) ? Math.round($V{countryMap}.toSorted().values().getAt(-3)/3/$V{enrolmentsCount}*10000)/100 : 0) + "%"]]></textFieldExpression>
                </textField>

                <textField>
                    <reportElement style="data field" x="1" y="81" width="312" height="20"/>
                    <textFieldExpression><![CDATA[$V{countryMap}.toSorted().keySet().getAt(-4) ?: "-"]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="360" y="81" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{countryMap}.toSorted().values().getAt(-4) ? $V{countryMap}.toSorted().values().getAt(-4)/3 : 0]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="81" width="40" height="20"/>
                    <textFieldExpression><![CDATA[($V{countryMap}.toSorted().values().getAt(-4) ? Math.round($V{countryMap}.toSorted().values().getAt(-4)/3/$V{enrolmentsCount}*10000)/100 : 0) + "%"]]></textFieldExpression>
                </textField>

                <textField>
                    <reportElement style="data field" x="1" y="101" width="312" height="20"/>
                    <textFieldExpression><![CDATA[$V{countryMap}.toSorted().keySet().getAt(-5) ?: "-"]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="360" y="101" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{countryMap}.toSorted().values().getAt(-5) ? $V{countryMap}.toSorted().values().getAt(-5)/3 : 0]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="101" width="40" height="20"/>
                    <textFieldExpression><![CDATA[($V{countryMap}.toSorted().values().getAt(-5) ? Math.round($V{countryMap}.toSorted().values().getAt(-5)/3/$V{enrolmentsCount}*10000)/100 : 0) + "%"]]></textFieldExpression>
                </textField>

                <textField>
                    <reportElement style="data field" x="1" y="121" width="312" height="20"/>
                    <textFieldExpression><![CDATA[$V{countryMap}.toSorted().keySet().getAt(-6) ?: "-"]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="360" y="121" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{countryMap}.toSorted().values().getAt(-6) ? $V{countryMap}.toSorted().values().getAt(-6)/3 : 0]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="121" width="40" height="20"/>
                    <textFieldExpression><![CDATA[($V{countryMap}.toSorted().values().getAt(-6) ? Math.round($V{countryMap}.toSorted().values().getAt(-6)/3/$V{enrolmentsCount}*10000)/100 : 0) + "%"]]></textFieldExpression>
                </textField>

                <textField>
                    <reportElement style="data field" x="1" y="141" width="312" height="20"/>
                    <textFieldExpression><![CDATA[$V{countryMap}.toSorted().keySet().getAt(-7) ?: "-"]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="360" y="141" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{countryMap}.toSorted().values().getAt(-7) ? $V{countryMap}.toSorted().values().getAt(-7)/3 : 0]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="141" width="40" height="20"/>
                    <textFieldExpression><![CDATA[($V{countryMap}.toSorted().values().getAt(-7) ? Math.round($V{countryMap}.toSorted().values().getAt(-7)/3/$V{enrolmentsCount}*10000)/100 : 0) + "%"]]></textFieldExpression>
                </textField>

                <textField>
                    <reportElement style="data field" x="1" y="161" width="312" height="20"/>
                    <textFieldExpression><![CDATA[$V{countryMap}.toSorted().keySet().getAt(-8) ?: "-"]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="360" y="161" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{countryMap}.toSorted().values().getAt(-8) ? $V{countryMap}.toSorted().values().getAt(-8)/3 : 0]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="161" width="40" height="20"/>
                    <textFieldExpression><![CDATA[($V{countryMap}.toSorted().values().getAt(-8) ? Math.round($V{countryMap}.toSorted().values().getAt(-8)/3/$V{enrolmentsCount}*10000)/100 : 0) + "%"]]></textFieldExpression>
                </textField>

                <textField>
                    <reportElement style="data field" x="1" y="181" width="312" height="20"/>
                    <textFieldExpression><![CDATA[$V{countryMap}.toSorted().keySet().getAt(-9) ?: "-"]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="360" y="181" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{countryMap}.toSorted().values().getAt(-9) ? $V{countryMap}.toSorted().values().getAt(-9)/3 : 0]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="181" width="40" height="20"/>
                    <textFieldExpression><![CDATA[($V{countryMap}.toSorted().values().getAt(-9) ? Math.round($V{countryMap}.toSorted().values().getAt(-9)/3/$V{enrolmentsCount}*10000)/100 : 0) + "%"]]></textFieldExpression>
                </textField>

                <textField>
                    <reportElement style="data field" x="1" y="201" width="312" height="20"/>
                    <textFieldExpression><![CDATA[$V{countryMap}.toSorted().keySet().getAt(-10) ?: "-"]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="360" y="201" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{countryMap}.toSorted().values().getAt(-10) ? $V{countryMap}.toSorted().values().getAt(-10)/3 : 0]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="201" width="40" height="20"/>
                    <textFieldExpression><![CDATA[($V{countryMap}.toSorted().values().getAt(-10) ? Math.round($V{countryMap}.toSorted().values().getAt(-10)/3/$V{enrolmentsCount}*10000)/100 : 0) + "%"]]></textFieldExpression>
                </textField>

                <staticText>
                    <reportElement style="data field" x="1" y="221" width="312" height="20"/>
                    <text><![CDATA[Not stated]]></text>
                </staticText>
                <textField>
                    <reportElement style="data field" x="360" y="221" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{unknownCountry}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="221" width="40" height="20"/>
                    <textFieldExpression><![CDATA[Math.round($V{unknownCountry}/$V{enrolmentsCount}*10000)/100 + "%"]]></textFieldExpression>
                </textField>

                <staticText>
                    <reportElement style="data field" x="1" y="241" width="312" height="20"/>
                    <text><![CDATA[Other]]></text>
                </staticText>
                <textField>
                    <reportElement style="data field" x="360" y="241" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{countryMap}.size() > 10 ? $V{countryMap}.toSorted().values().toList().subList(0, $V{countryMap}.size() - 10).sum()/3 : 0]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="241" width="40" height="20"/>
                    <textFieldExpression><![CDATA[($V{countryMap}.size() > 10 ? Math.round(($V{countryMap}.toSorted().values().toList().subList(0, $V{countryMap}.size() - 10).sum()/3)/$V{enrolmentsCount}*10000)/100 : 0)+ "%"]]></textFieldExpression>
                </textField>

                <line>
                    <reportElement style="Footer" x="1" y="265" width="482" height="1"/>
                    <graphicElement>
                        <pen lineWidth="0.5"/>
                    </graphicElement>
                </line>

                <textField>
                    <reportElement style="data field" x="360" y="261" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{enrolmentsCount}]]></textFieldExpression>
                </textField>
                <staticText>
                    <reportElement style="data field" x="440" y="261" width="112" height="20"/>
                    <text><![CDATA[100%]]></text>
                </staticText>
            </band>
        </groupFooter>
    </group>
    <group name="suburb" >
        <groupExpression><![CDATA[null]]></groupExpression>
        <groupFooter>
            <band height="300" splitType="Stretch">
                <property name="com.jaspersoft.studio.unit.height" value="pixel"/>
                <staticText>
                    <reportElement style="data field" x="1" y="1" width="312" height="20"/>
                    <textElement>
                        <font isBold="true"/>
                    </textElement>
                    <text><![CDATA[Suburb]]></text>
                </staticText>

                <line>
                    <reportElement style="Footer" x="1" y="25" width="482" height="1"/>
                    <graphicElement>
                        <pen lineWidth="0.5"/>
                    </graphicElement>
                </line>
                <textField>
                    <reportElement style="data field" x="1" y="21" width="312" height="20"/>
                    <textFieldExpression><![CDATA[$V{suburbMap}.toSorted().keySet().getAt(-1) ?: "-"]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="360" y="21" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{suburbMap}.toSorted().values().getAt(-1) ? $V{suburbMap}.toSorted().values().getAt(-1)/3 : 0]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="21" width="40" height="20"/>
                    <textFieldExpression><![CDATA[($V{suburbMap}.toSorted().values().getAt(-1) ? Math.round($V{suburbMap}.toSorted().values().getAt(-1)/3/$V{enrolmentsCount}*10000)/100 : 0) + "%"]]></textFieldExpression>
                </textField>

                <textField>
                    <reportElement style="data field" x="1" y="41" width="312" height="20"/>
                    <textFieldExpression><![CDATA[$V{suburbMap}.toSorted().keySet().getAt(-2) ?: "-"]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="360" y="41" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{suburbMap}.toSorted().values().getAt(-2) ? $V{suburbMap}.toSorted().values().getAt(-2)/3 : 0]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="41" width="40" height="20"/>
                    <textFieldExpression><![CDATA[($V{suburbMap}.toSorted().values().getAt(-2) ? Math.round($V{suburbMap}.toSorted().values().getAt(-2)/3/$V{enrolmentsCount}*10000)/100 : 0) + "%"]]></textFieldExpression>
                </textField>

                <textField>
                    <reportElement style="data field" x="1" y="61" width="312" height="20"/>
                    <textFieldExpression><![CDATA[$V{suburbMap}.toSorted().keySet().getAt(-3) ?: "-"]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="360" y="61" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{suburbMap}.toSorted().values().getAt(-3) ? $V{suburbMap}.toSorted().values().getAt(-3)/3 : 0]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="61" width="40" height="20"/>
                    <textFieldExpression><![CDATA[($V{suburbMap}.toSorted().values().getAt(-3) ? Math.round($V{suburbMap}.toSorted().values().getAt(-3)/3/$V{enrolmentsCount}*10000)/100 : 0) + "%"]]></textFieldExpression>
                </textField>

                <textField>
                    <reportElement style="data field" x="1" y="81" width="312" height="20"/>
                    <textFieldExpression><![CDATA[$V{suburbMap}.toSorted().keySet().getAt(-4) ?: "-"]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="360" y="81" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{suburbMap}.toSorted().values().getAt(-4) ? $V{suburbMap}.toSorted().values().getAt(-4)/3 : 0]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="81" width="40" height="20"/>
                    <textFieldExpression><![CDATA[($V{suburbMap}.toSorted().values().getAt(-4) ? Math.round($V{suburbMap}.toSorted().values().getAt(-4)/3/$V{enrolmentsCount}*10000)/100 : 0) + "%"]]></textFieldExpression>
                </textField>

                <textField>
                    <reportElement style="data field" x="1" y="101" width="312" height="20"/>
                    <textFieldExpression><![CDATA[$V{suburbMap}.toSorted().keySet().getAt(-5) ?: "-"]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="360" y="101" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{suburbMap}.toSorted().values().getAt(-5) ? $V{suburbMap}.toSorted().values().getAt(-5)/3 : 0]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="101" width="40" height="20"/>
                    <textFieldExpression><![CDATA[($V{suburbMap}.toSorted().values().getAt(-5) ? Math.round($V{suburbMap}.toSorted().values().getAt(-5)/3/$V{enrolmentsCount}*10000)/100 : 0) + "%"]]></textFieldExpression>
                </textField>

                <textField>
                    <reportElement style="data field" x="1" y="121" width="312" height="20"/>
                    <textFieldExpression><![CDATA[$V{suburbMap}.toSorted().keySet().getAt(-6) ?: "-"]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="360" y="121" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{suburbMap}.toSorted().values().getAt(-6) ? $V{suburbMap}.toSorted().values().getAt(-6)/3 : 0]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="121" width="40" height="20"/>
                    <textFieldExpression><![CDATA[($V{suburbMap}.toSorted().values().getAt(-6) ? Math.round($V{suburbMap}.toSorted().values().getAt(-6)/3/$V{enrolmentsCount}*10000)/100 : 0) + "%"]]></textFieldExpression>
                </textField>

                <textField>
                    <reportElement style="data field" x="1" y="141" width="312" height="20"/>
                    <textFieldExpression><![CDATA[$V{suburbMap}.toSorted().keySet().getAt(-7) ?: "-"]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="360" y="141" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{suburbMap}.toSorted().values().getAt(-7) ? $V{suburbMap}.toSorted().values().getAt(-7)/3 : 0]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="141" width="40" height="20"/>
                    <textFieldExpression><![CDATA[($V{suburbMap}.toSorted().values().getAt(-7) ? Math.round($V{suburbMap}.toSorted().values().getAt(-7)/3/$V{enrolmentsCount}*10000)/100 : 0) + "%"]]></textFieldExpression>
                </textField>

                <textField>
                    <reportElement style="data field" x="1" y="161" width="312" height="20"/>
                    <textFieldExpression><![CDATA[$V{suburbMap}.toSorted().keySet().getAt(-8) ?: "-"]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="360" y="161" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{suburbMap}.toSorted().values().getAt(-8) ? $V{suburbMap}.toSorted().values().getAt(-8)/3 : 0]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="161" width="40" height="20"/>
                    <textFieldExpression><![CDATA[($V{suburbMap}.toSorted().values().getAt(-8) ? Math.round($V{suburbMap}.toSorted().values().getAt(-8)/3/$V{enrolmentsCount}*10000)/100 : 0) + "%"]]></textFieldExpression>
                </textField>

                <textField>
                    <reportElement style="data field" x="1" y="181" width="312" height="20"/>
                    <textFieldExpression><![CDATA[$V{suburbMap}.toSorted().keySet().getAt(-9) ?: "-"]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="360" y="181" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{suburbMap}.toSorted().values().getAt(-9) ? $V{suburbMap}.toSorted().values().getAt(-9)/3 : 0]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="181" width="40" height="20"/>
                    <textFieldExpression><![CDATA[($V{suburbMap}.toSorted().values().getAt(-9) ? Math.round($V{suburbMap}.toSorted().values().getAt(-9)/3/$V{enrolmentsCount}*10000)/100 : 0) + "%"]]></textFieldExpression>
                </textField>

                <textField>
                    <reportElement style="data field" x="1" y="201" width="312" height="20"/>
                    <textFieldExpression><![CDATA[$V{suburbMap}.toSorted().keySet().getAt(-10) ?: "-"]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="360" y="201" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{suburbMap}.toSorted().values().getAt(-10) ? $V{suburbMap}.toSorted().values().getAt(-10)/3 : 0]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="201" width="40" height="20"/>
                    <textFieldExpression><![CDATA[($V{suburbMap}.toSorted().values().getAt(-10) ? Math.round($V{suburbMap}.toSorted().values().getAt(-10)/3/$V{enrolmentsCount}*10000)/100 : 0) + "%"]]></textFieldExpression>
                </textField>

                <staticText>
                    <reportElement style="data field" x="1" y="221" width="312" height="20"/>
                    <text><![CDATA[Not stated]]></text>
                </staticText>
                <textField>
                    <reportElement style="data field" x="360" y="221" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{notStated}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="221" width="40" height="20"/>
                    <textFieldExpression><![CDATA[Math.round($V{notStated}/$V{enrolmentsCount}*10000)/100 + "%"]]></textFieldExpression>
                </textField>

                <staticText>
                    <reportElement style="data field" x="1" y="241" width="312" height="20"/>
                    <text><![CDATA[Other]]></text>
                </staticText>
                <textField>
                    <reportElement style="data field" x="360" y="241" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{suburbMap}.size() > 10 ? $V{suburbMap}.toSorted().values().toList().subList(0, $V{suburbMap}.size() - 10).sum()/3 : 0]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="241" width="40" height="20"/>
                    <textFieldExpression><![CDATA[($V{suburbMap}.size() > 10 ? Math.round(($V{suburbMap}.toSorted().values().toList().subList(0, $V{suburbMap}.size() - 10).sum()/3)/$V{enrolmentsCount}*10000)/100 : 0)+ "%"]]></textFieldExpression>
                </textField>
                <line>
                    <reportElement style="Footer" x="1" y="265" width="482" height="1"/>
                    <graphicElement>
                        <pen lineWidth="0.5"/>
                    </graphicElement>
                </line>

                <textField>
                    <reportElement style="data field" x="360" y="261" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{enrolmentsCount}]]></textFieldExpression>
                </textField>
                <staticText>
                    <reportElement style="data field" x="440" y="261" width="112" height="20"/>
                    <text><![CDATA[100%]]></text>
                </staticText>
            </band>
        </groupFooter>
    </group>
    <group name="age">
        <groupExpression><![CDATA[null]]></groupExpression>
        <groupFooter>
            <band height="260" splitType="Stretch">
                <property name="com.jaspersoft.studio.unit.height" value="pixel"/>
                <staticText>
                    <reportElement style="data field" x="1" y="1" width="312" height="20"/>
                    <textElement>
                        <font isBold="true"/>
                    </textElement>
                    <text><![CDATA[Age]]></text>
                </staticText>

                <line>
                    <reportElement style="Footer" x="1" y="25" width="482" height="1"/>
                    <graphicElement>
                        <pen lineWidth="0.5"/>
                    </graphicElement>
                </line>

                <staticText>
                    <reportElement style="data field" x="1" y="21" width="312" height="20"/>
                    <text><![CDATA[0-10]]></text>
                </staticText>
                <textField>
                    <reportElement style="data field" x="360" y="21" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{under10}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="21" width="40" height="20"/>
                    <textFieldExpression><![CDATA[Math.round($V{under10}/$V{enrolmentsCount}*10000)/100 + "%"]]></textFieldExpression>
                </textField>

                <staticText>
                    <reportElement style="data field" x="1" y="41" width="312" height="20"/>
                    <text><![CDATA[10-20]]></text>
                </staticText>
                <textField>
                    <reportElement style="data field" x="360" y="41" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{under20}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="41" width="40" height="20"/>
                    <textFieldExpression><![CDATA[Math.round($V{under20}/$V{enrolmentsCount}*10000)/100 + "%"]]></textFieldExpression>
                </textField>

                <staticText>
                    <reportElement style="data field" x="1" y="61" width="312" height="20"/>
                    <text><![CDATA[20-30]]></text>
                </staticText>
                <textField>
                    <reportElement style="data field" x="360" y="61" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{under30}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="61" width="40" height="20"/>
                    <textFieldExpression><![CDATA[Math.round($V{under30}/$V{enrolmentsCount}*10000)/100 + "%"]]></textFieldExpression>
                </textField>

                <staticText>
                    <reportElement style="data field" x="1" y="81" width="312" height="20"/>
                    <text><![CDATA[30-40]]></text>
                </staticText>
                <textField>
                    <reportElement style="data field" x="360" y="81" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{under40}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="81" width="40" height="20"/>
                    <textFieldExpression><![CDATA[Math.round($V{under40}/$V{enrolmentsCount}*10000)/100 + "%"]]></textFieldExpression>
                </textField>

                <staticText>
                    <reportElement style="data field" x="1" y="101" width="312" height="20"/>
                    <text><![CDATA[40-50]]></text>
                </staticText>
                <textField>
                    <reportElement style="data field" x="360" y="101" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{under50}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="101" width="40" height="20"/>
                    <textFieldExpression><![CDATA[Math.round($V{under50}/$V{enrolmentsCount}*10000)/100 + "%"]]></textFieldExpression>
                </textField>

                <staticText>
                    <reportElement style="data field" x="1" y="121" width="312" height="20"/>
                    <text><![CDATA[50-60]]></text>
                </staticText>
                <textField>
                    <reportElement style="data field" x="360" y="121" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{under60}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="121" width="40" height="20"/>
                    <textFieldExpression><![CDATA[Math.round($V{under60}/$V{enrolmentsCount}*10000)/100 + "%"]]></textFieldExpression>
                </textField>

                <staticText>
                    <reportElement style="data field" x="1" y="141" width="312" height="20"/>
                    <text><![CDATA[60-70]]></text>
                </staticText>
                <textField>
                    <reportElement style="data field" x="360" y="141" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{under70}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="141" width="40" height="20"/>
                    <textFieldExpression><![CDATA[Math.round($V{under70}/$V{enrolmentsCount}*10000)/100 + "%"]]></textFieldExpression>
                </textField>

                <staticText>
                    <reportElement style="data field" x="1" y="161" width="312" height="20"/>
                    <text><![CDATA[70-80]]></text>
                </staticText>
                <textField>
                    <reportElement style="data field" x="360" y="161" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{under80}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="161" width="40" height="20"/>
                    <textFieldExpression><![CDATA[Math.round($V{under80}/$V{enrolmentsCount}*10000)/100 + "%"]]></textFieldExpression>
                </textField>

                <staticText>
                    <reportElement style="data field" x="1" y="181" width="312" height="20"/>
                    <text><![CDATA[80+]]></text>
                </staticText>
                <textField>
                    <reportElement style="data field" x="360" y="181" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{over80}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="181" width="40" height="20"/>
                    <textFieldExpression><![CDATA[Math.round($V{over80}/$V{enrolmentsCount}*10000)/100 + "%"]]></textFieldExpression>
                </textField>

                <staticText>
                    <reportElement style="data field" x="1" y="201" width="312" height="20"/>
                    <text><![CDATA[Not stated]]></text>
                </staticText>
                <textField>
                    <reportElement style="data field" x="360" y="201" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{unknownAge}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="201" width="40" height="20"/>
                    <textFieldExpression><![CDATA[Math.round($V{unknownAge}/$V{enrolmentsCount}*10000)/100 + "%"]]></textFieldExpression>
                </textField>

                <line>
                    <reportElement style="Footer" x="1" y="225" width="482" height="1"/>
                    <graphicElement>
                        <pen lineWidth="0.5"/>
                    </graphicElement>
                </line>

                <textField>
                    <reportElement style="data field" x="360" y="221" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{enrolmentsCount}]]></textFieldExpression>
                </textField>
                <staticText>
                    <reportElement style="data field" x="440" y="221" width="112" height="20"/>
                    <text><![CDATA[100%]]></text>
                </staticText>
            </band>
        </groupFooter>
    </group>
    <group name="gender">
        <groupExpression><![CDATA[null]]></groupExpression>
        <groupFooter>
            <band height="140" splitType="Stretch">
                <property name="com.jaspersoft.studio.unit.height" value="pixel"/>
                <staticText>
                    <reportElement style="data field" x="1" y="1" width="312" height="20"/>
                    <textElement>
                        <font isBold="true"/>
                    </textElement>
                    <text><![CDATA[Gender]]></text>
                </staticText>

                <line>
                    <reportElement style="Footer" x="1" y="25" width="482" height="1"/>
                    <graphicElement>
                        <pen lineWidth="0.5"/>
                    </graphicElement>
                </line>

                <staticText>
                    <reportElement style="data field" x="1" y="21" width="312" height="20"/>
                    <text><![CDATA[Male:]]></text>
                </staticText>
                <textField>
                    <reportElement style="data field" x="360" y="21" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{male}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="21" width="40" height="20"/>
                    <textFieldExpression><![CDATA[Math.round($V{male}/$V{enrolmentsCount}*10000)/100 + "%"]]></textFieldExpression>
                </textField>

                <staticText>
                    <reportElement style="data field" x="1" y="41" width="312" height="20"/>
                    <text><![CDATA[Female:]]></text>
                </staticText>
                <textField>
                    <reportElement style="data field" x="360" y="41" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{female}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="41" width="40" height="20"/>
                    <textFieldExpression><![CDATA[Math.round($V{female}/$V{enrolmentsCount}*10000)/100 + "%"]]></textFieldExpression>
                </textField>

                <staticText>
                    <reportElement style="data field" x="1" y="61" width="312" height="20"/>
                    <text><![CDATA[Not stated:]]></text>
                </staticText>
                <textField>
                    <reportElement style="data field" x="360" y="61" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{unknownGender}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="440" y="61" width="40" height="20"/>
                    <textFieldExpression><![CDATA[Math.round($V{unknownGender}/$V{enrolmentsCount}*10000)/100 + "%"]]></textFieldExpression>
                </textField>

                <line>
                    <reportElement style="Footer" x="1" y="85" width="482" height="1"/>
                    <graphicElement>
                        <pen lineWidth="0.5"/>
                    </graphicElement>
                </line>

                <staticText>
                    <reportElement style="data field" x="1" y="81" width="312" height="20"/>
                    <text><![CDATA[Total]]></text>
                </staticText>
                <textField>
                    <reportElement style="data field" x="360" y="81" width="40" height="20"/>
                    <textFieldExpression><![CDATA[$V{enrolmentsCount}]]></textFieldExpression>
                </textField>
                <staticText>
                    <reportElement style="data field" x="440" y="81" width="112" height="20"/>
                    <text><![CDATA[100%]]></text>
                </staticText>
            </band>
        </groupFooter>
    </group>
    <group name="summary">
        <groupExpression><![CDATA[null]]></groupExpression>
        <groupFooter>
            <band height="60" splitType="Stretch">
                <staticText>
                    <reportElement style="data field" x="1" y="1" width="50" height="15"/>
                    <text><![CDATA[Printed on:]]></text>
                </staticText>
                <textField pattern="dd MMM yyyy">
                    <reportElement style="data field" x="51" y="1" width="300" height="15"/>
                    <textFieldExpression><![CDATA[new Date()]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement style="data field" x="1" y="20" width="400" height="15"/>
                    <textFieldExpression><![CDATA["Records selected: " + $V{courseClassCount} + " classes, " + $V{enrolmentsCount} + " enrolments"]]></textFieldExpression>
                </textField>
            </band>
        </groupFooter>
    </group>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="115" splitType="Stretch">
            <staticText>
                <reportElement style="header 1" x="1" y="80" width="500" height="30"/>
                <text><![CDATA[Demographic Data Report]]></text>
            </staticText>
        </band>
    </title>
    <detail>
        <band splitType="Stretch"/>
    </detail>
    <columnFooter>
        <band splitType="Stretch"/>
    </columnFooter>
    <pageFooter>
        <band height="25" splitType="Stretch">
            <textField evaluationTime="Page" isBlankWhenNull="false">
                <reportElement key="pageNumberFooter" style="Footer strong" x="0" y="0" width="300" height="15" uuid="1106d334-b156-4af7-a64d-a75ba7206e2c"/>
                <textFieldExpression><![CDATA["Page " + String.valueOf($V{PAGE_NUMBER})]]></textFieldExpression>
            </textField>
            <textField evaluationTime="Report" isBlankWhenNull="false">
                <reportElement key="totalPageCountFooter" style="Footer" x="0" y="11" width="300" height="13" uuid="d3e402c5-a433-4f08-90db-5c66216e08f3"/>
                <textFieldExpression><![CDATA[$V{REPORT_COUNT} + " record" + ($V{REPORT_COUNT}>1 ? "s" : "") + " on " + $V{PAGE_NUMBER} + " page" + ($V{PAGE_NUMBER}>1 ? "s" : "") + " (printed " + new Date().format("E d MMM yyyy h:mma") + ")"]]></textFieldExpression>
            </textField>
            <image scaleImage="RetainShape" hAlign="Right" isUsingCache="true" onErrorType="Blank">
                <reportElement key="oncourseLogo" style="Footer" x="472" y="17" width="67" height="7" uuid="2863530e-11e5-4c1e-8296-ae64db1a9926"/>
                <imageExpression><![CDATA[$F{image.poweredby}]]></imageExpression>
            </image>
        </band>
    </pageFooter>
    <summary>
        <band splitType="Stretch"/>
    </summary>
</jasperReport>
