<html t:type="ui/dialogstructure" title="literal:Add to Waiting List"
	xmlns:t="http://tapestry.apache.org/schema/tapestry_5_1_0.xsd"
	xmlns:p="tapestry:parameter">
	<t:if test="course">
			<t:if test="submittedSuccessfully">
				<div class="message">
					<p class="feedback">
						Thank you for your request.
						<br/> 
						The student <b>${contact.givenName} ${contact.familyName}</b> (<b>${waitingList.potentialStudents}</b> potential places)
						<br/> 
						was successfully added to waiting list for course <b>${course.name}</b>.
					</p>
				</div>
				<p:else>
					<p>To join the waiting list, please complete the following form:</p>
					<t:form t:id="waitingListForm">
						<t:errors/>
						<dl>
							<dt>First Name:</dt>
							<dd>
								<t:textfield t:id="waitlistFirstName" validate="required"
										t:value="newContact.givenName" />
							</dd>
							<dt>Last Name:</dt>
							<dd>
								<t:textfield t:id="waitlistLastName" validate="required"
										t:value="newContact.familyName" />
							</dd>
							<dt>E-Mail address:</dt>
							<dd>
								<t:textfield t:id="waitlistEmail" validate="required"
										t:value="newContact.emailAddress" />
							</dd>
							<t:if test="showAdditionalDetails">
								<t:if test="showAddress">
									<dt>Address<t:if test="requireAddress"><em title="${message:required}">*</em></t:if>:</dt>
									<dd>
										<t:textfield value="contact.street" class="input-fixed"
											clientId="street" t:id="street" />
									</dd>
								</t:if>
								<t:if test="showSuburb">
									<dt>Suburb<t:if test="requireSuburb"><em title="${message:required}">*</em></t:if>:</dt>
									<dd>
										<script type="text/javascript">
											initSuburbAutoComplete();
										</script>
										<t:textfield value="contact.suburb" class="suburb-autocomplete input-fixed"
												clientId="suburb" t:id="suburb" default="postcode or suburb" size="18"
												autocomplete="off" />
										<span t:type="ui/HintComponent" validationMessage="suburbErrorMessage" />
									</dd>
								</t:if>
								<t:if test="showPostcode">
									<dt>Postcode<t:if test="requirePostcode"><em title="${message:required}">*</em></t:if>:</dt>
									<dd>
										<t:textfield value="contact.postcode" class="input-fixed"
											clientId="postcode" t:id="postcode" />
										<span t:type="ui/HintComponent" validationMessage="postcodeErrorMessage"
											hint="message:postcode-hint" />
									</dd>
								</t:if>
								<t:if test="showState">
									<dt>State<t:if test="requireState"><em title="${message:required}">*</em></t:if>:</dt>
									<dd>
										<t:textfield value="contact.state" class="input-fixed"
											clientId="state" t:id="state" />
										<span t:type="ui/HintComponent" validationMessage="stateErrorMessage"
											hint="message:state-hint" />
									</dd>
								</t:if>
								<t:if test="showHomePhone">
									<dt>Home Phone<t:if test="requireHomePhone"><em title="${message:required}">*</em></t:if>:</dt>
									<dd>
										<t:textfield value="contact.homePhoneNumber" class="input-fixed"
											clientId="homephone" t:id="homePhone" />
										<span t:type="ui/HintComponent" validationMessage="homePhoneErrorMessage"
											hint="message:home-phone-hint" />
									</dd>
								</t:if>
								<t:if test="showMobile">
									<dt>Mobile Phone<t:if test="requireMobile"><em title="${message:required}">*</em></t:if>:</dt>
									<dd>
										<t:textfield value="contact.mobilePhoneNumber" class="input-fixed"
											clientId="mobilephone" t:id="mobilePhone" />
										<span t:type="ui/HintComponent" validationMessage="mobilePhoneErrorMessage"
											hint="message:mobile-phone-hint" />
									</dd>
								</t:if>
								<t:if test="showBusinessPhone">
									<dt>Work Phone<t:if test="requireBusinessPhone"><em title="${message:required}">*</em></t:if>:</dt>
									<dd>
										<t:textfield value="contact.businessPhoneNumber" class="input-fixed"
											clientId="businessphone" t:id="businessPhone" />
										<span t:type="ui/HintComponent" validationMessage="businessPhoneErrorMessage"
											hint="message:business-phone-hint" />
									</dd>
								</t:if>
								<t:if test="showFax">
									<dt>Fax<t:if test="requireFax"><em title="${message:required}">*</em>:</t:if></dt>
									<dd>
										<t:textfield value="contact.faxNumber" class="input-fixed"
											clientId="facsimile" t:id="fax" />
										<span t:type="ui/HintComponent" validationMessage="faxErrorMessage"
											hint="message:fax-hint" />
									</dd>
								</t:if>
								<t:if test="showDateOfBirth">
									<dt>Date of birth<t:if test="requireDateOfBirth"><em title="${message:required}">*</em></t:if>:</dt>
									<dd>
										<t:textField value="birthDateProperty" class="input-fixed"
											clientId="birthdate" t:id="birthDate" />
										<span t:type="ui/HintComponent" validationMessage="birthDateErrorMessage"
											hint="message:birthdate-hint" />
									</dd>
								</t:if>
							</t:if>
							<dt>
								What you'd like:
								<span class="description">
									Please tell us your preferences, eg on Tuesdays, in Newtown, etc.
								</span>
							</dt>
							<dd>
								<t:textarea t:id="waitlistNotes" t:value="waitingList.detail"
										cols="30" rows="4" />
							</dd>
							<dt>Number of students (including you):</dt>
							<dd>
								<t:textfield t:id="numberOfStudents" validate="required"
										t:value="waitingList.potentialStudents" />
							</dd>
							<t:submit t:value="Add to waiting list"/>
						</dl>
					</t:form>
				</p:else>
			</t:if>
		<p:else>Sorry, the course is not defined.</p:else>
	</t:if>	
</html>	