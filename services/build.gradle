apply from: "$rootDir/gradle/functions.gradle"
apply from: "$rootDir/gradle/buildTapestryApp.gradle"

sourceSets {
    main {
        java {
            srcDirs 'src/main/java'
            srcDirs 'src/main/generated'
        }
    }
}
configurations {
    all*.exclude group: 'org.apache.derby', module: 'derby'
}


dependencies {
    testCompile project(':common:test-functions')
}

task generateSources(type: Copy) {
    from 'src/templates'
    into 'src/main/generated'
    expand(replicationVersions: replicationVersions, referenceVersions: referenceVersions)
}


test {
    forkEvery = 1 //run every test in separate jvm
    initTestDBConfig(project, test)
}

mainClassName = 'ish.oncourse.webservices.ServicesApp'
