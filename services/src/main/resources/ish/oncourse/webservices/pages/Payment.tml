<!DOCTYPE HTML>
<html lang="en" xmlns:t="http://tapestry.apache.org/schema/tapestry_5_1_0.xsd" xmlns:p="tapestry:parameter">
	<head>
		<meta http-equiv="Cache-control" content="no-cache"/>
		<meta charset="utf-8"/>
		<title>${message:headerTitle}</title>
		<t:if test="showProcessing">
			<meta http-equiv="refresh" content="3"/>
		</t:if>
		<meta name="keywords" content=""/>
		<meta name="description" content=""/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge; chrome=1"/>
	</head>
	<body>
		<div class="page">
		
			<t:if test="errorMessage">
				<div class="header">
					<h1 class="header-title">${errorMessage}</h1>
					<a href="#" class="logo"></a>
				</div>
				<p:else>
					<t:delegate to="block:payment"/>
				</p:else>
			</t:if>
		</div>
	</body>

	<t:block t:id="payment">
		<div class="header">
			<h1 class="header-title">${message:headerTitle}</h1>
			<a href="#" class="logo"></a>
		</div>
	
		<div class="process">
	
			<h2 class="page-title">${paymentTitle}</h2>
	
			<ul class="process-list">
				<t:loop source="invoices" value="invoice">
					<li><span>${invoiceDescription}</span>
						<t:output value="invoice.totalGst" format="moneyFormat"/>
					</li>
				</t:loop>
			</ul>
			<div class="process-total">
				<span>${message:totalOfPayment}</span>
				<t:output value="totalIncGst" format="moneyFormat"/>
			</div>
	
		</div>
		<div class="pay-form">
			<t:if test="showForm">
				<div id="paymentDetailsForm">
	
					<div class="pay-form-line">
						<label>${message:nameOnCard}<sup>*</sup></label>
					   <span class="pay-form-control">
						   <input id="cardName" type="text" maxlength="500" class="field" name="creditCardName"
								  autocomplete="off"/>
					   </span>
						<span id="name-error"></span>
					</div>
	
					<div class="pay-form-line">
						<label>${message:cardNumber}<sup>*</sup></label>
					   <span class="pay-form-control">
							<input name="creditCardNumber" type="text" class="field" id="cardNumber" maxlength="20"
								   autocomplete="off"/>
					   </span>
						<span id="number-error"></span>
					</div>
	
					<div class="pay-form-line">
						<label>${message:expDate}<sup>*</sup></label>
					   <span class="pay-form-control">
						   <select class="field small" id="expiryMonth" name="expiryMonth">
							   <option value="">mm</option>
							   <option value="01">01</option>
							   <option value="02">02</option>
							   <option value="03">03</option>
							   <option value="04">04</option>
							   <option value="05">05</option>
							   <option value="06">06</option>
							   <option value="07">07</option>
							   <option value="08">08</option>
							   <option value="09">09</option>
							   <option value="10">10</option>
							   <option value="11">11</option>
							   <option value="12">12</option>
						   </select>
						  /
						   <select class="field small" id="expiryYear" name="expiryYear">
							   <option value="">yyyy</option>
							   <t:loop source="years" value="year">
								   <option value="${year}">${year}</option>
							   </t:loop>
						   </select>
					   </span>
						<span id="date-error"></span>
					</div>
	
					<div class="pay-form-line">
						<label>${message:cvv}<sup>*</sup></label>
					   <span class="pay-form-control">
						<input id="cardCvv" name="creditCardCVV" type="text" class="field small" maxlength="4" autocomplete="off"/>
					   </span>
						<span id="cvv-error"></span>
					</div>
					<div class="pay-form-submit-wrapper">
						<div class="submit-wrapper">
							<div class="submit-left">
								<a id="cancel">Cancel</a>
							</div>
							<div class="submit-right">
							<span class="btn-next-wr">
								<button id="pay-button" class="btn btn-next">Submit</button>
							</span>
							</div>
						</div>
					</div>
				</div>
			</t:if>
	
			<t:if test="showProcessing">
				<div class="pay-process">
					<h2 class="page-title">Payment is now being processed against the bank. Please wait...</h2>
	
					<p>This page will update automatically</p>
				</div>
			</t:if>
			<t:if test="showResult">
				<t:delegate to="block:result"/>
			</t:if>
		</div>
	</t:block>

	<t:block t:id="result">
		<t:paymentResult t:id="result"/>
	</t:block>

</html>