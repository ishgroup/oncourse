<!DOCTYPE HTML>
<html lang="en" xmlns:t="http://tapestry.apache.org/schema/tapestry_5_1_0.xsd"
        >
<head>
    <meta charset="utf-8"/>
    <title>${message:headerTitle}</title>
    <t:if test="showProcessing">
    	<meta http-equiv="refresh" content="3"/>
    </t:if>
    <meta name="keywords" content=""/>
    <meta name="description" content=""/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge; chrome=1"/>
</head>
<body>

	<div class="page">
	
	    <div class="header">
	        <h1 class="header-title">${message:headerTitle}</h1>
	        <a href="#" class="logo"></a>
	    </div>
	
	    <div class="process">
	
	        <h2 class="page-title">${paymentTitle}</h2>
	
	        <ul class="process-list">
	        	<t:loop source="invoices" value="invoice">
	        		<li><span>${invoiceDescription}</span> ${message:currency}<t:output value="invoice.totalGst" format="moneyFormat"/></li>
	        	</t:loop>
	        </ul>
	        <div class="process-total">
	            <span>${message:totalOfPayment}</span>${message:currency}<t:output value="totalIncGst" format="moneyFormat"/>
	        </div>
	        
	    </div>
        <t:if test="illegalState">
            <div class="pay-fail">
                <h2 class="page-title">You try to use a few browser tabs to process the payment or payment already expired without user activity.</h2>
            </div>
        </t:if>
	    <t:if test="showForm">
			<span t:id="paymentForm" t:type="PaymentForm" payment="payment"/>
    	</t:if>
    	<t:if test="showResult">
			<t:PaymentResult t:id="result" payment="payment"/>
    	</t:if>
    	<t:if test="showProcessing">
			<div class="pay-form">
				<div class="pay-process">
					<h2 class="page-title">Payment is now being processed against the bank. Please wait...</h2>
					<p>This page will update automatically, or <a href="${refreshLink}">click here</a> to check the payment status now.</p>
				</div>
			</div>
		</t:if>
	</div>
</body>
</html>