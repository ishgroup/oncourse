apply from: "$rootDir/gradle/tapestry.app.gradle"
//apply from: "$rootDir/gradle/build-static.gradle"

configurations {
	all*.exclude group: 'org.apache.tapestry', module: 'tapestry-spring'
}

ext {
	tapestryVersion = '5.5.0'
}

dependencies {
	/**
	 * tapestry dependencies
	 */
	compile "org.apache.tapestry:tapestry-core:$tapestryVersion"
	compile "org.apache.tapestry:plastic:$tapestryVersion"
	compile "org.apache.tapestry:tapestry5-annotations:$tapestryVersion"
	compile "org.apache.tapestry:tapestry-ioc:$tapestryVersion"
	compile "org.apache.tapestry:tapestry-json:$tapestryVersion"
	compile "org.apache.tapestry:tapestry-spring:$tapestryVersion"
	compile "org.apache.tapestry:tapestry-upload:$tapestryVersion"

	testCompile ("org.apache.tapestry:tapestry-test:$tapestryVersion") {
		exclude group: 'org.seleniumhq.selenium.server', module: 'selenium-server'
	}

	compile project(':common:common-model')
	compile (project(':common:common-services'))  {
		exclude group: 'axis', module: 'axis'
	}
	compile (project(':common:webservices-usi')) {
		exclude group: 'axis'
		exclude group: 'org.apache.cxf'
		exclude group: 'org.springframework'
		exclude group: 'ish.oncourse.willow'
	}

	compile ('org.apache.cxf:cxf-rt-frontend-jaxws:2.6.6') {
		exclude group: 'org.apache.geronimo.specs', module: 'geronimo-servlet_3.0_spec'
		exclude group: 'org.apache.geronimo.specs', module: 'geronimo-javamail_1.4_spec'
	}

	compile 'org.apache.cxf:cxf-rt-ws-security:2.6.6'
	compile 'org.apache.cxf:cxf-rt-transports-http:2.6.6'
	compile 'xalan:xalan:2.7.2'
	compile 'wsdl4j:wsdl4j:1.6.3'

	compile 'org.reflections:reflections:0.9.11'
	compile 'commons-dbcp:commons-dbcp:1.4'
	compile 'commons-pool:commons-pool:1.5.6'

	// The odd next line is to work around gradle pulling in the wrong configuration
	// http://forums.gradle.org/gradle/topics/transitive_libraries_not_included_through_project_dependency
	testCompile project(path: ':common:common-test', configuration: 'testFixtures')

	testCompile project(':common:test-functions')
}


mainClassName = 'ish.oncourse.admin.AdminApp'
