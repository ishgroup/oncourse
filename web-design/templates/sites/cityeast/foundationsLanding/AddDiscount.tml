<html t:type="ui/dialogstructure" title="literal:My Discounts"
	  xmlns:t="http://tapestry.apache.org/schema/tapestry_5_1_0.xsd">

	<p>Sometimes we are able to offer discounts on a selection of our classes. If you have a discount code, then please enter it into the box
		below</p>
	<t:delegate to="block:discountForm"/>
	<p class="note"><strong class="alert">Please note:</strong> Our discounts are usually only available until a certain date, so you may not be able to use an old discount code.</p>

	<t:block t:id="discountForm">
		<t:form t:id="addDiscountForm" zone="addDiscountZone" clientValidation="literal:NONE">
			<label for="promo">Discount code:</label>
			<t:textField t:id="promo" value="promoCode"/>
			<button id="addDiscountButton" type="button">add</button>
			<t:eventlink t:id="addDiscountEvent" style="{display:none}"/>
			<div class="validation">${errorMessage}</div>
		</t:form>
		<t:if test="promotionsList.empty" negate="true">
			<br />
			<h3>You have entered the following codes.</h3>
			<t:loop source="promotionsList" value="addedPromotion">
				<h5 class="popup-name">${addedPromotion.code}</h5>
				<div class="clear"></div>
				<p>
					<t:outputRaw value="addedPromotion.detail"></t:outputRaw>
				</p>
				<div class="divideline"></div>
			</t:loop>
			<p>The discounted prices will be now shown next to each course as you browse this site.</p>
			<a href="#" class="button" onclick="window.parent.location.reload(true);return false;">Close</a>
		</t:if>
	</t:block>
</html>
