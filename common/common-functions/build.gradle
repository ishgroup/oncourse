apply from: "$rootDir/gradle/functions.gradle"
apply from: "$rootDir/gradle/caffeine.gradle"

sourceSets.main.java.srcDirs = []
sourceSets.main.groovy.srcDir 'src/main/java'

sourceSets.test.java.srcDirs = []
sourceSets.test.groovy.srcDir 'src/test/java'

//groovy compile should read source files in UTF-8
//because some tests (ish.oncourse.services.textile.TextileUtilTest.test_unicodeQuotesEncoding)
//use UTF-8 chars
compileGroovy.options.encoding = 'UTF-8'
compileTestGroovy.options.encoding = 'UTF-8'

dependencies {
    compile project(':common:cayenne-model')
    compile 'javax.cache:cache-api:1.0.0'
    compile 'org.ehcache:ehcache:' + ehcacheVersion
    compile 'javax.servlet:servlet-api:3.0'
    compile 'axis:axis:1.4'
    compile 'wsdl4j:wsdl4j:1.6.3'
    compile 'org.apache.solr:solr-solrj:' + solrVersion
    compile 'commons-httpclient:commons-httpclient:3.1'
    compile 'net.java.dev.textile-j:textile-j:2.2.864'
    compile 'com.atlassian.commonmark:commonmark:0.15.2'

    testCompile project(':common:test-functions')
}

test {
    forkEvery = 1 //run every test in separate jvm
    initTestDBConfig(project, test)
}
