sourceSets.main.java.srcDirs = []
sourceSets.main.groovy.srcDir 'src/main/java'

sourceSets.test.java.srcDirs = []
sourceSets.test.groovy.srcDir 'src/test/java'

compileGroovy.options.encoding = 'UTF-8'
compileTestGroovy.options.encoding = 'UTF-8'

dependencies {
    implementation project(':common:common-functions')
    implementation project(':common:cayenne-model')

    implementation group: 'org.mariadb.jdbc', name: 'mariadb-java-client', version: mariadbVersion
    implementation group: 'org.apache.commons', name: 'commons-pool2', version: '2.4.2'
    implementation group: 'org.apache.commons', name: 'commons-dbcp2', version: '2.1.1'
    implementation group: 'com.github.javafaker', name: 'javafaker', version: '0.13'
    implementation 'org.dbunit:dbunit:2.5.3'
    implementation group: 'com.carrotsearch.randomizedtesting', name: 'randomizedtesting-runner', version: '2.5.3'
}

targetCompatibility = '1.8'
sourceCompatibility = '1.8'

task createDatabase(type: JavaExec) {
    doLast {
        classpath = sourceSets.main.runtimeClasspath
        main = 'ish.oncourse.test.functions.Functions'
        args  project.property('args')
    }
}
