plugins {
    id 'java-library'
    id 'java-test-fixtures'
}

sourceSets.testFixtures.java.srcDirs = []
sourceSets.testFixtures.groovy.srcDirs += 'src/testFixtures/java'

dependencies {
    testFixturesApi(project(':common:common-functions'))
    testFixturesApi(project(':common:cayenne-model'))

    testFixturesApi "org.mariadb.jdbc:mariadb-java-client:$mariadbVersion"
    testFixturesApi "org.apache.commons:commons-pool2:2.4.2"
    testFixturesApi "org.apache.commons:commons-dbcp2:2.1.1"
    testFixturesApi "com.github.javafaker:javafaker:0.13"
    testFixturesApi "org.dbunit:dbunit:2.5.3"
    testFixturesApi "com.carrotsearch.randomizedtesting:randomizedtesting-runner:2.5.3"
}

task createDatabase(type: JavaExec) {
    doLast {
        classpath = sourceSets.main.runtimeClasspath
        main = 'ish.oncourse.test.functions.Functions'
        args  project.property('args')
    }
}
