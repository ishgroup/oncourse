<?xml version="1.0" encoding="UTF-8" ?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"
        xmlns:t="http://tapestry.apache.org/schema/tapestry_5_1_0.xsd"
		xmlns:p="tapestry:parameter">
	<url>
		<loc>https://${hostName}/</loc>
		<lastmod>
			<t:output value="siteModificationDate" format="dateFormat" />
		</lastmod>
		<changefreq>daily</changefreq>
		<priority>0.3</priority>
	</url>
	<t:loop source="courses" value="course">
		<url>
			<loc>https://${hostName}/course/${course.code}</loc>
			<lastmod>
				<t:output value="course.modified" format="dateFormat" />
			</lastmod>
			<changefreq>daily</changefreq>
			<priority>0.8</priority>
		</url>
	</t:loop>
	<t:loop source="sites" value="site">
		<url>
			<loc>https://${hostName}/site/${site.angelId}</loc>
			<lastmod>
				<t:output value="site.modified" format="dateFormat" />
			</lastmod>
			<changefreq>daily</changefreq>
			<priority>0.4</priority>
		</url>
	</t:loop>
	<t:loop source="tutors" value="tutor">
        <t:if test="isActiveTutor()">
            <url>
                <loc>https://${hostName}/tutor/${tutor.angelId}</loc>
                <lastmod>
                    <t:output value="tutor.modified" format="dateFormat" />
                </lastmod>
                <changefreq>daily</changefreq>
                <priority>0.4</priority>
            </url>
        </t:if>
	</t:loop>
	<t:loop source="pages" value="page">
		<url>
			<t:if test="${webNodeService.getDefaultWebURLAlias(page)}">
				<loc>https://${hostName}${webNodeService.getDefaultWebURLAlias(page).urlPath}</loc>
				<p:else>
					<loc>https://${hostName}/page/${page.nodeNumber}</loc>
				</p:else>
			</t:if>
			<lastmod>
				<t:output value="page.modified" format="dateFormat" />
			</lastmod>
			<changefreq>daily</changefreq>
			<priority>0.7</priority>
		</url>
	</t:loop>
</urlset>
