dependencies {
	compile "org.apache.cayenne:cayenne-server:$cayenneVersion"
    compile 'org.apache.commons:commons-lang3:3.3.2'
    compile 'commons-codec:commons-codec:1.10'
}

jar {
    manifest {
        attributes 'SCM-Revision': project.release.scmVersion,
        'Release-Version': version,
        'Built-Date': System.getProperty('build_number') ? new Date(): new Date().format("yy-MMM-dd"),
        'Built-JDK': System.getProperty('java.version'),
        'Built-Gradle': gradle.gradleVersion,
        'Implementation-Version': System.getProperty('build_number') ?: 'local',
        'Permissions': 'all-permissions',
        'Codebase': '*',
        'Application-Name': 'onCourse',
        'Trusted-Library': 'true'
    }
}

task sourceJar(type: Jar, dependsOn: classes) {
    classifier = 'sources'
    from sourceSets.main.allSource
}

artifacts {
	archives jar
    archives sourceJar
}