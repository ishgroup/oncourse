configurations { providedCompile }

sourceSets.main.java.srcDirs = []
sourceSets.main.groovy.srcDir 'src/main/java'

sourceSets.test.java.srcDirs = []
sourceSets.test.groovy.srcDir 'src/test/java'

//groovy compile should read source files in UTF-8
//because some tests (ish.oncourse.services.textile.TextileUtilTest.test_unicodeQuotesEncoding)
//use UTF-8 chars
compileGroovy.options.encoding = 'UTF-8'
compileTestGroovy.options.encoding = 'UTF-8'

dependencies {
	compile project(':common:common-model')
	compile project(':common:common-functions')

	compile 'commons-collections:commons-collections:3.2.1'
	compile 'commons-logging:commons-logging:1.1.1'
	compile 'commons-lang:commons-lang:2.6'
	compile 'velocity:velocity:1.3.1'
	compile 'org.apache.tapestry:tapestry-core:5.2.6'
	compile 'org.apache.tapestry:tapestry5-annotations:5.2.6'
	compile 'joda-time:joda-time:1.6.2'
	compile 'net.htmlparser.jericho:jericho-html:3.2'

    //the jackson verson does not have problem with initializing in hot deployed wars
    compile 'com.fasterxml.jackson.core:jackson-databind:2.2.3'
	compile 'com.amazonaws:aws-java-sdk:1.6.11'

	//we use DefaultArtifactVersion class from the package to compare angel versions.
	compile 'org.apache.maven:maven-artifact:3.0.4'

	// The odd next line is to work around gradle pulling in the wrong configuration
	// http://forums.gradle.org/gradle/topics/transitive_libraries_not_included_through_project_dependency
	testCompile project(path: ':common:common-test', configuration: 'testFixtures')

	testCompile group: 'org.mariadb.jdbc', name: 'mariadb-java-client', version: mariadbVersion
}

sourceSets.main.compileClasspath += configurations.providedCompile
sourceSets.test.compileClasspath += configurations.providedCompile
sourceSets.test.runtimeClasspath += configurations.providedCompile