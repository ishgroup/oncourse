plugins {
	id 'java-library'
	id 'java-test-fixtures'
}

apply from: "$rootDir/gradle/functions.gradle"
apply from: "$rootDir/gradle/tapestry.gradle"

sourceSets.testFixtures.java.srcDirs = []
sourceSets.testFixtures.groovy.srcDirs += 'src/testFixtures/java'

dependencies {
	api project(':common:cayenne-model')
	api project(':common:common-functions')
	api project(':common:solr-index')

	api 'org.codehaus.groovy.modules.http-builder:http-builder:0.7.2'

	api 'commons-collections:commons-collections:3.2.1'
	api 'net.htmlparser.jericho:jericho-html:3.2'

    //the jackson verson does not have problem with initializing in hot deployed wars
	api 'com.fasterxml.jackson.core:jackson-databind:2.2.3'
	api 'com.amazonaws:aws-java-sdk-s3:1.11.964'
	api 'com.amazonaws:aws-java-sdk-iam:1.11.964'

	//we use DefaultArtifactVersion class from the package to compare angel versions.
	api 'org.apache.maven:maven-artifact:3.0.4'
	testFixturesApi (testFixtures(project(":common:test-functions")))
	testImplementation(testFixtures(project(":common:test-functions")))

}

test {
    forkEvery = 1 //run every test in separate jvm
    initTestDBConfig(project, test)
}

