<html t:type="ui/internal/pagestructure" bodyId="literal:SiteList" bodyClass="literal:internal-page"
	xmlns:t="http://tapestry.apache.org/schema/tapestry_5_1_0.xsd" xmlns:p="tapestry:parameter">
	<h1>Sites</h1>
	<span t:type="ui/GoogleMapSites" sites="sites" showLocationMap="true"></span>
	<script type="text/javascript">
			$j(document).ready(function() {
				if ($j('#gmapCanvas').length) {
					mapLoad('gmapCanvas', gMapSites, gMapOptions);
				}
			});
	</script>
	<ul class="siteList">
		<t:loop source="sites" value="site">
			<li class="vcard">
				<h3>${site.name}</h3>
				<t:if t:test="site.hasCoordinates">
					<h3 class="fn org">
						<a class="url" href="/site/${site.angelId}">${site.name}</a>
					</h3>
					<div class="sites-loc-wrapper">
						<div class="sites-map-link">
							<a href="#" onclick="zoomMapForSite(${site.angelId})" title="click to show on the map above" class="class_location">Show on map</a>
							<br />
							<a href="/site/${site.angelId}">Details and directions</a>
                            <br />
                            <a href="/courses?near=${site.suburb}">Show classes</a>
						</div>
						<div class="siteAddress adr">
							<span class="street-address">${site.street}</span>
							<span class="extended-address">
								<span class="locality">${site.suburb}</span>
								<abbr class="region">${site.postcode}</abbr>
								<span class="postal-code">${site.state}</span>
							</span>
						</div>
					</div>

					<p:else>
						<h3>${site.name}</h3>
						<div class="siteAddress adr">
							<span class="street-address">${site.street}</span>
							<span class="extended-address">
								<span class="locality">${site.suburb}</span>
								<abbr class="region">${site.postcode}</abbr>
								<span class="postal-code">${site.state}</span>
							</span>
						</div>
					</p:else>
				</t:if>
			</li>
		</t:loop>
	</ul>
</html>
