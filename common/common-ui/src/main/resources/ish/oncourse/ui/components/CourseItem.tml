<t:container xmlns:t="http://tapestry.apache.org/schema/tapestry_5_1_0.xsd" xmlns:p="tapestry:parameter">
	<div class="vevent courseItem">
		<t:if t:test="isList" negate="true">
			<h1 class="summary page-title">${course.name}</h1>
			<t:if t:test="addThisEnabled">
				<div class="addthis">
					<span t:type="ui/socialmedia" addThisProfileId="addThisProfileId"/>
				</div>
			</t:if>
            <div class="clearboth"></div>
			<p:else>
				<h2>
					<a href="/course/${course.code}" class="url">${course.name}</a>
				</h2>
				<div class="description courseShortDescription">

					<t:outputraw value="${courseDetail}" />

					<strong class="more">[<a href="/course/${course.code}">More</a>]</strong>
				</div>
			</p:else>
		</t:if>
		<t:loop source="classes" value="courseClass">
			<t:if test="shouldHideClass" negate="true">
				<span t:type="ui/courseclassitem" courseClass="courseClass" linkToLocationsMap="linkToLocationsMap" isList="isList"/>
			</t:if>
		</t:loop>
		<t:if test="otherClasses.empty" negate="true">
			<p class="really-other-classes-control clearfix">
				<a href="javascript:return false;" >Show other classes</a>
			</p>
			<div class="really-other-classes" style="display:none;">
				<t:loop source="otherClasses" value="courseClass">
					<span t:type="ui/courseclassitem" courseClass="courseClass" linkToLocationsMap="linkToLocationsMap" isList="isList"/>
				</t:loop>
			</div>
		</t:if>
		<t:if test="isList">
			<t:if test="fullClasses.empty" negate="true">
			<p class="other-classes-control clearfix">
				<a href="javascript:return false;" >Show full classes</a>
			</p>
			<div class="other-classes" style="display:none;">
				<t:loop source="fullClasses" value="courseClass">
					<span t:type="ui/courseclassitem" courseClass="courseClass" linkToLocationsMap="linkToLocationsMap" isList="isList"/>
				</t:loop>
			</div>
			</t:if>
		</t:if>
		<t:if t:test="course.allowWaitingList">
			<p class="waiting-list-title" id="wl${course.id}">
				<a class="nyromodalreload actionLink" href="/enrol/waitinglistform?courseId=${course.id}" target="_blank">
					<t:if t:test="course.enrollableClasses.empty" negate="true">
						<t:if t:test="hasMoreAvailablePlaces"> If there isn't a class to suit you, please <p:else> Classes are full. Please </p:else>
						</t:if>
						<p:else> This course has no current classes. Please </p:else>
					</t:if>
					<img src="/s/img/button_join.png" alt="join" /> the waiting list. </a>
			</p>
		</t:if>
		<t:if t:test="isList" negate="true">
			<div class="courseDescription">
				<t:outputraw value="${courseDetail}" />
			</div>
		</t:if>
		
	</div>
</t:container>
