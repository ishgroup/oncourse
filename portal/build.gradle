apply plugin: 'war'
apply plugin: 'compass'
apply plugin: 'js'

dependencies {
	providedCompile 'javax.servlet:servlet-api:2.5'

	compile 'org.apache.tapestry:tapestry-core:5.3.7'
	compile 'org.apache.tapestry:plastic:5.3.7'
	compile 'org.apache.tapestry:tapestry5-annotations:5.3.7'
	compile 'org.apache.tapestry:tapestry-ioc:5.3.7'
	compile 'org.apache.tapestry:tapestry-json:5.3.7'
	compile 'org.mnode.ical4j:ical4j:1.0.2'
	compile 'com.ocpsoft:ocpsoft-pretty-time:1.0.7'
    compile 'com.fasterxml.jackson.core:jackson-databind:2.2.3'

	compile project(':common:common-model')
	compile project(':common:common-textile')
	compile project(':common:common-services')

	// The odd next line is to work around gradle pulling in the wrong configuration
	// http://forums.gradle.org/gradle/topics/transitive_libraries_not_included_through_project_dependency
	testCompile project(path: ':common:common-test', configuration: 'testFixtures')
}

war {
	archiveName = 'portal.war'
	manifest {
		from sharedManifest
	}

    from 'build/resource-assemble'
    from ('src/main/static') {
        exclude 'js'
        exclude 'src'
    }
}

apply from: '../resourcesBuild.gradle'