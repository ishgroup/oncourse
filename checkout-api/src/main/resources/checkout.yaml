swagger: '2.0'
info:
  title: Ish API
  description: Ish React App Api
  version: "1.0.0"
schemes:
  - https
produces:
  - application/json
paths:
  /v1/getContactNode:
    post:
      x-filter:
      - CollegeInfo
      operationId: getContactNode
      summary: Get list of purchases
      description: Get list of enrolments/applications/product items for certain contact based on selected classes/products
      tags:
      - Checkout
      consumes:
      - application/json
      parameters:
      - name: contactNodeRequest
        in: body
        description: Params for request list of products/classes
        required: true
        schema:
          $ref: '#/definitions/checkout.request.ContactNodeRequest'
      responses:
        200:
          description: List of products
          schema:
            $ref: '#/definitions/checkout.ContactNode'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/common.CommonError'
  /v2/getContactNode:
    post:
      x-filter:
        - CollegeInfo
      operationId: getContactNodeV2
      summary: Get list of purchases
      description: Get list of enrolments/applications/product items for certain contact based on selected classes/products
      tags:
        - CheckoutV2
      consumes:
        - application/json
      parameters:
        - name: contactNodeRequest
          in: body
          description: Params for request list of products/classes
          required: true
          schema:
            $ref: '#/definitions/checkout.request.ContactNodeRequest'
      responses:
        200:
          description: List of products
          schema:
            $ref: '#/definitions/checkout.ContactNode'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/common.CommonError'
  /v1/getCheckoutModel:
    post:
      x-filter:
      - CollegeInfo
      operationId: getCheckoutModel
      summary: Validate all purchase items. Calculate total amount and price for each discounted enrolment.
      description: Validate all purchase items. Calculate total amount and price for each discounted enrolment
      tags:
      - Checkout
      consumes:
      - application/json
      parameters:
      - name: checkoutModelRequest
        in: body
        description: List of contact's purchases, current payer ID, list of added promotions
        required: true
        schema:
          $ref: '#/definitions/checkout.CheckoutModelRequest'
      responses:
        200:
          description: Whole Checkout Model with calclated amount and actual prices for each purchase item
          schema:
            $ref: '#/definitions/checkout.CheckoutModel'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/common.CommonError'
  /v2/makePayment:
    post:
      x-filter:
      - CollegeInfo
      - XValidate
      operationId: makePayment
      summary: Validate model and create windcave session OR save model and complete windcave session (depends on xValidate header)
      description: Validate model and create windcave session OR save model and complete windcave session (depends on xValidate header)
      tags:
        - CheckoutV2
      consumes:
        - application/json
      parameters:
        - name: paymentRequest
          in: body
          description: Payment data
          required: true
          schema:
            $ref: '#/definitions/v2.checkout.payment.PaymentRequest'
        - name: xValidateOnly
          in: header
          type: boolean
          required: true
          description: validate request, create payment session. Otherwice complete payment
        - name: payerId
          in: header
          type: string
          required: true
        - name: xOrigin
          in: header
          type: string
          required: true
      responses:
        200:
          description: Payment Response object with sessionId populated
          schema:
            $ref: '#/definitions/v2.checkout.payment.PaymentResponse'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/common.CommonError'
  /v1/makePayment:
    post:
      x-filter:
      - CollegeInfo
      operationId: makePayment
      summary: Validate model, save purchase items into db and send payment to DPS
      description: Validate model, save purchase items into db and send payment to DPS
      tags:
      - Checkout
      consumes:
      - application/json
      parameters:
      - name: paymentRequest
        in: body
        description: Checkout model plus credit cadr data
        required: true
        schema:
          $ref: '#/definitions/checkout.payment.PaymentRequest'
      responses:
        200:
          description: Payment Response object with sessionId populated
          schema:
            $ref: '#/definitions/checkout.payment.PaymentResponse'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/common.CommonError'
  /v1/getPaymentStatus/{sessionId}:
    get:
      x-filter:
      - CollegeInfo
      operationId: getPaymentStatus
      summary: Get actual payment status
      description: Get actual payment status
      tags:
      - Checkout
      parameters:
      - name: sessionId
        in: path
        description: Checkout model plus credit cadr data
        required: true
        type: string
      responses:
        200:
          description: Payment Response object with sessionId populated
          schema:
            $ref: '#/definitions/checkout.payment.PaymentResponse'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/common.CommonError'
  /v2/getPaymentStatus/{sessionId}:
    get:
      x-filter:
        - CollegeInfo
      operationId: getStatus
      summary: Get actual payment status
      description: Get actual payment status
      tags:
        - CheckoutV2
      parameters:
        - name: sessionId
          in: path
          description: windcave session id
          required: true
          type: string
        - name: payerId
          in: header
          type: string
          required: true
      responses:
        200:
          description: responce text inside
          schema:
            $ref: '#/definitions/v2.checkout.payment.PaymentResponse'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/common.CommonError'
  /v1/products:
    post:
      x-filter:
        - CollegeInfo
      summary: Get list of products
      operationId: getProducts
      description: Get list of products based on current shopping cart state
      tags:
       - Products
      consumes:
       - application/json
      parameters:
      - name: productsParams
        in: body
        description: Params for request list of products
        required: true
        schema:
          $ref: '#/definitions/web.ProductsParams'
      responses:
        200:
          description: List of products
          schema:
            type: array
            items:
              $ref: '#/definitions/web.Product'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/common.CommonError'
  /v1/classes:
    post:
      x-filter:
        - CollegeInfo
      summary: Get list of CourseClasses
      operationId: getCourseClasses
      description: Get list of course classes based on current shopping cart state
      tags:
       - CourseClasses
      consumes:
       - application/json
      parameters:
      - name: courseClassesParams
        in: body
        description: Params for request list of course classes
        required: true
        schema:
          $ref: '#/definitions/web.CourseClassesParams'
      responses:
        200:
          description: List of products
          schema:
            type: array
            items:
              $ref: '#/definitions/web.CourseClass'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/common.CommonError'

  /v1/course/classes/{courseId}:
    post:
      x-filter:
        - CollegeInfo
      summary: Get list of available classes by course id
      operationId: getAvailableClasses
      description: Get list of available classes by course id
      tags:
        - CourseClasses
      consumes:
        - application/json
      parameters:
        - name: courseId
          in: path
          description: course id
          required: true
          type: string
      responses:
        200:
          description: List of classes
          schema:
            type: array
            items:
              $ref: '#/definitions/web.CourseClass'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/common.CommonError'

  /v1/courses:
    post:
      x-filter:
        - CollegeInfo
      summary: Get list of Courses
      operationId: getCourses
      description: Get list of courses based on current shopping cart state
      tags:
       - CourseClasses
      consumes:
       - application/json
      parameters:
      - name: coursesParams
        in: body
        description: Params for request list of courses
        required: true
        schema:
          $ref: '#/definitions/web.CoursesParams'
      responses:
        200:
          description: List of cources
          schema:
            type: array
            items:
              $ref: '#/definitions/web.Course'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/common.CommonError'
  /v1/contact:
    put:
      x-filter:
        - XValidate
        - CollegeInfo
        - ContactValidation
      summary: Create or get Contact
      operationId: createOrGetContact
      description: Create or get Contact for add student view operation
      tags:
       - Contact
      parameters:
      - name: createContactParams
        in: body
        description: Params for create or get contact
        required: true
        schema:
          $ref: '#/definitions/web.CreateContactParams'
      responses:
        200:
          description: ContactId object
          schema:
            $ref: '#/definitions/web.ContactId'
        400:
          description: Validation error
          schema:
            $ref: '#/definitions/common.ValidationError'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/common.CommonError'
  /v1/contact/{studentUniqueIdentifier}:
    get:
      x-filter:
        - CollegeInfo
      summary: Get contact for provided student unique identifier
      operationId: getContact
      description: Get contact for provided student unique identifier
      tags:
       - Contact
      parameters:
      - name: studentUniqueIdentifier
        in: path
        description: Unique identifier of student
        required: true
        type: string
      responses:
        200:
          description: Contact for provided id
          schema:
            $ref: '#/definitions/web.Contact'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/common.CommonError'
  /v1/contactFields:
    post:
      x-filter:
        - CollegeInfo
      summary: Get contact's empty fields that should be filled based on classes configs
      operationId: getContactFields
      description: Get contact's fields
      tags:
       - Contact
      consumes:
      - application/json
      parameters:
      - name: contactFieldsRequest
        in: body
        description: Params for get  contact's fields
        required: true
        schema:
          $ref: '#/definitions/field.ContactFieldsRequest'
      responses:
        200:
          description: Contact Id
          schema:
            $ref: '#/definitions/field.ContactFields'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/common.CommonError'
  /v1/createParentChildrenRelation:
    put:
      x-filter:
      - XValidate
      - CollegeInfo
      summary: Create parent children relation
      operationId: createParentChildrenRelation
      tags:
      - Contact
      consumes:
      - application/json
      parameters:
      - name: request
        in: body
        description: Contact fields
        required: true
        schema:
            $ref: '#/definitions/checkout.CreateParentChildrenRequest'
      responses:
        200:
          description: Ok response
        400:
          description: Validation error
          schema:
            $ref: '#/definitions/common.ValidationError'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/common.CommonError'
  /v1/submitContactDetails:
    post:
      x-filter:
      - XValidate
      - CollegeInfo
      summary: Save contact details from web form
      operationId: submitContactDetails
      description: Save contact details
      tags:
      - Contact
      consumes:
      - application/json
      parameters:
      - name: contactFields
        in: body
        description: Contact fields
        required: true
        schema:
            $ref: '#/definitions/field.SubmitFieldsRequest'
      responses:
        200:
          description: ContactId object
          schema:
            $ref: '#/definitions/web.ContactId'
        400:
          description: Validation error
          schema:
            $ref: '#/definitions/common.ValidationError'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/common.CommonError'
  /v1/submitCode/{code}:
    get:
      x-filter:
      - CollegeInfo
      summary: Get promotion discount or voucher by code
      operationId: submitCode
      description: Get promotion discount or voucher by code
      tags:
       - Promotion
      parameters:
      - name: code
        in: path
        description: Promotion or voucher code
        required: true
        type: string
      responses:
        200:
          description:  for provided code
          schema:
            $ref: '#/definitions/checkout.CodeResponse'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/common.CommonError'
  /v1/promotion/{code}:
    get:
      x-filter:
      - CollegeInfo
      summary: Get promotion by code
      operationId: getPromotion
      description: Get promotion by code
      tags:
       - Promotion
      parameters:
      - name: code
        in: path
        description: Promotions's code
        required: true
        type: string
      responses:
        200:
          description: Promotion for provided code
          schema:
            $ref: '#/definitions/web.Promotion'
        404:
          description: In case if promotion not avaliable for provided code
          schema:
            title: web.PromotionNotFound
            type: object
            properties:
              message:
                type: string
                description: Message to show on UI
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/common.CommonError'

  /v1/cart/{id}:
    get:
      summary: Get cart
      description: |
        Get cart
      operationId: get
      tags:
        - Cart
      consumes:
        - application/json
      parameters:
        - name: id
          in: path
          description: unique cart identifier
          required: true
          type: string
      responses:
        200:
          description: cart object
          schema:
            type: string
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/common.CommonError'

    post:
      summary: Create new Cart session
      description: |
        Create new session Id that will be used for futher requests to cast endpoints.
      operationId: create
      tags:
       - Cart
      parameters:
        - name: id
          in: path
          description: unique cart identifier
          required: true
          type: string
        - name: checkout
          in: body
          description: checkout model
          required: true
          schema:
            type: string
      responses:
        204:
          description: success responce
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/common.CommonError'
    delete:
      summary: delete cart
      description: |
        delete cart after checkout pass ok
      operationId: delete
      tags:
        - Cart
      consumes:
        - application/json
      parameters:
        - name: id
          in: path
          description: unique cart identifier
          required: true
          type: string
      responses:
        204:
          description: success responce
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/common.CommonError'

  /v1/postcode/{text}:
    get:
      x-filter:
      - SearchText
      - CollegeInfo
      summary: Postcode endpoint
      operationId: getPostcodes
      description: Provide autocomplete candidates for provided text
      tags:
      - Search
      parameters:
      - name: text
        in: path
        description: Text pattern to searche on
        required: true
        type: string
      responses:
        200:
          description: List of autocomplete candidates
          schema:
            type: array
            items:
              $ref: '#/definitions/common.Item'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/common.CommonError'
  /v1/suburb/{text}:
    get:
      x-filter:
      - SearchText
      - CollegeInfo
      summary: Suburb endpoint
      operationId: getSuburbs
      description: Provide autocomplete candidates for searche text
      tags:
      - Search
      parameters:
      - name: text
        in: path
        description: Text pattern to searche on
        required: true
        type: string
      responses:
        200:
          description: List of autocomplete candidates
          schema:
            type: array
            items:
              $ref: '#/definitions/common.Item'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/common.CommonError'
  /v1/language/{text}:
    get:
      x-filter:
      - SearchText
      summary: Suburb endpoint
      operationId: getLanguages
      description: Provide autocomplete candidates for searche text
      tags:
      - Search
      parameters:
      - name: text
        in: path
        description: Text pattern to searche on
        required: true
        type: string
      responses:
        200:
          description: List of autocomplete candidates
          schema:
            type: array
            items:
              $ref: '#/definitions/common.Item'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/common.CommonError'
  /v1/country/{text}:
    get:
      x-filter:
      - SearchText
      summary: Suburb endpoint
      operationId: getCountries
      description: Provide autocomplete candidates for searche text
      tags:
      - Search
      parameters:
      - name: text
        in: path
        description: Text pattern to searche on
        required: true
        type: string
      responses:
        200:
          description: List of autocomplete candidates
          schema:
            type: array
            items:
              $ref: '#/definitions/common.Item'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/common.CommonError'
  /v1/getConcessionTypes:
    get:
      x-filter:
      - CollegeInfo
      summary: Provide list of awalible concessions for college
      operationId: getConcessionTypes
      description: Provide list of awalible concessions for college
      tags:
      - Contact
      responses:
        200:
          description: List of awalible concessions
          schema:
            type: array
            items:
              $ref: '#/definitions/checkout.concession.ConcessionType'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/common.CommonError'
  /v1/getContactConcessionsAndMemberships:
    post:
      x-filter:
      - CollegeInfo
      summary: Provide list of student concessions and active memberships
      operationId: getContactConcessionsAndMemberships
      description: Provide list of student concessions and active memberships
      tags:
      - Contact
      parameters:
      - name: contactIds
        in: body
        description: conact's ids
        required: true
        schema:
          type: array
          items:
            type: string
      responses:
        200:
          description:  Provide list of student concessions
          schema:
            $ref: '#/definitions/checkout.ConcessionsAndMemberships'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/common.CommonError'
  /v1/submitConcession:
    put:
      x-filter:
      - XValidate
      - CollegeInfo
      summary: Save conact's concession
      operationId: submitConcession
      description: Save conact's concession
      tags:
      - Contact
      parameters:
      - name: concession
        in: body
        description: conact's concession
        required: true
        schema:
          $ref: '#/definitions/checkout.concession.Concession'
      responses:
        200:
          description: Ok response
        400:
          description: Validation error
          schema:
            $ref: '#/definitions/common.ValidationError'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/common.CommonError'
  /v1/isCorporatePassEnabled:
    get:
      x-filter:
      - CollegeInfo
      summary: Check if Corporate Pass process enabled for college
      operationId: isCorporatePassEnabled
      description: Check if Corporate Pass process enabled for college
      tags:
      - CorporatePass
      responses:
        200:
          description: Enabled flag
          schema:
            type: boolean
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/common.CommonError'
  /v1/isCorporatePassEnabledFor:
    post:
      x-filter:
      - CollegeInfo
      summary: Check if any corporate pass applicable for purchases list
      operationId: isCorporatePassEnabledFor
      description: Check if any corporate pass applicable for purchases list
      tags:
      - CorporatePass
      parameters:
        - name: checkoutModelRequest
          in: body
          description: purchases list
          required: true
          schema:
            $ref: '#/definitions/checkout.CheckoutModelRequest'
      responses:
        200:
          description: Enabled flag
          schema:
            type: boolean
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/common.CommonError'
  /v1/getCorporatePass:
    post:
      x-filter:
      - CollegeInfo
      summary: Check if Corporate Pass avalible
      operationId: getCorporatePass
      description: Check if Corporate Pass by provided code exist and avalible for choosen Classes/Products
      tags:
      - CorporatePass
      parameters:
      - name: request
        in: body
        description: Get corporate pass request
        required: true
        schema:
          $ref: '#/definitions/checkout.corporatepass.GetCorporatePassRequest'
      responses:
        200:
          description: Corporate Pass model
          schema:
            $ref: '#/definitions/checkout.corporatepass.CorporatePass'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/common.CommonError'
  /v1/makeCorporatePass:
    post:
      x-filter:
      - XValidate
      - CollegeInfo
      summary: Make corporate pass process
      operationId: makeCorporatePass
      description: Validate model, save purchase items into db, tine invoices to corporate pass contact
      tags:
      - CorporatePass
      parameters:
      - name: request
        in: body
        description: Make corporate pass request
        required: true
        schema:
          $ref: '#/definitions/checkout.corporatepass.MakeCorporatePassRequest'
      responses:
        200:
          description: Ok response
        400:
          description: Validation error
          schema:
            $ref: '#/definitions/common.ValidationError'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/common.CommonError'
  /v1/getPreferences:
      get:
        x-filter:
        - CollegeInfo
        summary: Get set of college's preferences
        operationId: getPreferences
        description: Get set of college's preferences
        tags:
        - Preference
        responses:
          200:
            description: Corporate Pass model
            schema:
              $ref: '#/definitions/common.Preferences'
          default:
            description: Unexpected error
            schema:
              $ref: '#/definitions/common.CommonError'
parameters:
  XOrigin:
    name: X-Origin
    in: header
    description: |
      College URL which we sends with every request,
      since we have common endpoint for all colledges.
      Example: intranet.ish.com.au
    required: true
    type: string
  Session:
    name: X-Session-Token
    in: header
    description: User's session Id
    required: true
    type: string
definitions:
  common.Item:
    type: object
    properties:
      key:
        type: string
        description: Key which will be send back
      value:
        type: object
        description: Value which user will see
  common.Preferences:
    type: object
    properties:
      corporatePassEnabled:
        type: boolean
        description: is corporate pass enabled preference
      creditCardEnabled:
        type: boolean
        description: is credit card enabled preference
      successLink:
        type: string
        description: After payment successful redirect user to URL
      refundPolicyUrl:
        type: string
        description: Terms and conditions page
      featureEnrolmentDisclosure:
        type: string
        description: Student Information
      googleTagmanagerAccount:
        type: string
        description: Google tag manager account
      minAge:
        type: number
        description: Minimal age which not requiring parent
      amexEnabled:
        type: boolean
        description: Amex card payment enabled
  field.Suburb:
    type: object
    properties:
      state:
        type: string
        description: State that corresponds certain location
      suburb:
        type: string
        description: Suburb that corresponds certain location
      postcode:
        type: string
        description: Postcode that corresponds certain location
  web.product.Type:
    type: string
    enum:
      - ARTICLE
      - MEMBERSHIP
      - VOUCHER
  web.Product:
    type: object
    properties:
      id:
        type: string
        description: Internal Unique identifier of product
      code:
        type: string
        description: Code of product
      name:
        type: string
        description: Name of product
      description:
        type: string
        description: Description of product
      isPaymentGatewayEnabled:
        type: boolean
        description: Is payment gateway enabled
      canBuy:
        type: boolean
        description: Is on sale and is Web visible
      type:
        $ref: '#/definitions/web.product.Type'
      allowRemove:
        type: boolean
      relatedClassId:
        type: string
  web.Course:
    type: object
    properties:
      id:
        type: string
        description: Internal Unique identifier of course
      code:
        type: string
        description: Code of course
      name:
        type: string
        description: Name of course
      description:
        type: string
        description: Description of course
      hasCurrentClasses:
        type: boolean
        description: Has enrollable classes
      hasMoreAvailablePlaces:
        type: boolean
        description: Has more available places
  web.Site:
    type: object
    properties:
      name:
       type: string
       description: Site name
      street:
        type: string
        description: Site address
      suburb:
        type: string
        description: Site suburb
      postcode:
        type: string
        description: Site postcode
  web.Room:
    type: object
    properties:
      name:
        type: string
        description: Room name
      site:
        $ref: '#/definitions/web.Site'
        description: Site relation
  web.CourseClass:
    type: object
    properties:
      id:
        type: string
        description: Internal Unique identifier of class
      course:
        $ref: '#/definitions/web.Course'
      code:
        type: string
        description: Code of class
      start:
        description: Class start date and time in UTC time zone (+00:00),date format is ISO 8601
        type: string
        format: date-time
      end:
        description: Class start date and time in UTC time zone (+00:00),date format is ISO 8601
        type: string
        format: date-time
      hasAvailablePlaces:
        type: boolean
        description: Available places
      availableEnrolmentPlaces:
        type: integer
        format: int32
        description: Number of free places
      isFinished:
        type: boolean
        description: Is class finished
      isCancelled:
        type: boolean
        description: Is class cancelled
      isAllowByApplication:
        type: boolean
        description: Allow by application
      isPaymentGatewayEnabled:
        type: boolean
        description: Is payment gateway enabled
      distantLearning:
        type: boolean
        description: Self paced class
      price:
        $ref: '#/definitions/web.CourseClassPrice'
        description: Prices attached to current course class
      room:
        $ref: '#/definitions/web.Room'
        description: Room for the site
      timezone:
        type: string
        description: Timezone for the class
      subject:
        type: string
        description: Course Subject tag name

  web.CourseClassPrice:
    type: object
    properties:
      fee:
        type: number
        description: Full class price
      feeOverriden:
        type: number
        description: Class price overriden by application
      appliedDiscount:
        $ref: '#/definitions/web.Discount'
      possibleDiscounts:
        type: array
        items:
          $ref: '#/definitions/web.Discount'
        description: List discounts sorted by discounted fee
      hasTax:
        type: boolean
        description: Has tax
  web.Discount:
    type: object
    properties:
      id:
        type: string
        description: Internal Unique identifier of discount
      expiryDate:
        type: string
        format: date-time
      discountedFee:
        type: number
      discountValue:
        type: number
      title:
        type: string
  web.ContactId:
    type: object
    properties:
      id:
        type: string
        description: Contact id
      newContact:
        type: boolean
        description: Indicates that new contact created
      parentRequired:
        type: boolean
        description: Indicates that parent required
  web.Contact:
    type: object
    properties:
      id:
        type: string
        description: Internal Unique identifier of course
      uniqueIdentifier:
        type: string
        description: Unique identifier of contact
      firstName:
        type: string
        description: first name of contact
      lastName:
        type: string
        description: last name of contact
      email:
        type: string
        description: email of contact
      company:
        type: boolean
        description: Is company flag
      parentRequired:
        type: boolean
  web.Promotion:
    type: object
    properties:
      id:
        type: string
        description: Internal unique indetificator of promotion
      code:
        type: string
        description: Code of promotion
      name:
        type: string
        description: Name of promotion
  common.CommonError:
    type: object
    properties:
      code:
        type: integer
        format: int32
      message:
        type: string
  web.CourseClassesParams:
    type: object
    properties:
      courseClassesIds:
        type: array
        items:
          type: string
        description: List of requested course classes
      promotions:
        type: array
        items:
          $ref: '#/definitions/web.PromotionParams'
        description: List of applied promotions
      contact:
        $ref: '#/definitions/web.ContactParams'
  web.CoursesParams:
    type: object
    properties:
      coursesIds:
        type: array
        items:
          type: string
        description: List of requested courses
  web.ProductsParams:
    type: object
    properties:
      productsIds:
        type: array
        items:
          type: string
        description: List of requested products
      promotions:
        type: array
        items:
          $ref: '#/definitions/web.PromotionParams'
        description: List of applied promotions
      contact:
        $ref: '#/definitions/web.ContactParams'
  web.ContactParams:
    type: object
    properties:
      id:
        type: string
        description: Internal Unique identifier of course
  web.PromotionParams:
    type: object
    properties:
      id:
        type: string
        description: Internal unique indetificator of promotion
  field.FieldSet:
    type: string
    enum:
      - ENROLMENT
      - WAITINGLIST
      - MAILINGLIST
  web.CreateContactParams:
    type: object
    required:
    - firstName
    - lastName
    - email
    - fieldSet
    properties:
      firstName:
        type: string
        description: First Name of Contact
      lastName:
        type: string
        description: Last Name of Contact
      email:
        description: Email of Contact
        type: string
      fieldSet:
        $ref: '#/definitions/field.FieldSet'
      company:
        type: boolean
        description: Is company flag
  common.ValidationError:
    type: object
    required:
    - formErrors
    - fieldsErrors
    properties:
      formErrors:
        type: array
        items:
          type: string
        description: Global error
      fieldsErrors:
        type: array
        items:
          title: common.FieldError
          type: object
          required:
          - index
          - name
          - error
          properties:
            index:
              type: integer
              format: int32
              description: order position
            name:
              type: string
              description: Name of fiels with error
            error:
              type: string
              description: Errors for particular field, or empty array
        description: Array of fields errors, or empty array
  field.ContactFieldsRequest:
    type: object
    requred:
    - contactId
    - classIds
    - products
    - waitingCourseIds
    - mandatoryOnly
    - fieldSet
    - isPayer
    - isParent
    properties:
      contactId:
        type: string
        description: Requested contact id
      classIds:
        type: array
        items:
          type: string
        description: Requested classe's ids
      products:
        type: array
        items:
          $ref: '#/definitions/checkout.request.ProductContainer'
        description: Requested product's ids
      waitingCourseIds:
        type: array
        items:
          type: string
        description: Requested waiting list courses ids
      mandatoryOnly:
        type: boolean
        description: Flag to show only mandatory fields
      fieldSet:
        $ref: '#/definitions/field.FieldSet'
      isPayer:
        type: boolean
      isParent:
        type: boolean
  field.DataType:
    type: string
    enum:
      - STRING
      - LONG_STRING
      - PATTERN_TEXT
      - BOOLEAN
      - DATE
      - DATETIME
      - INTEGER
      - COUNTRY
      - LANGUAGE
      - ENUM
      - EMAIL
      - SUBURB
      - POSTCODE
      - PHONE
      - CHOICE
      - TAGGROUP_S
      - TAGGROUP_M
      - MAILINGLIST
      - MONEY
      - URL
  field.Field:
    type: object
    requred:
    - id
    - key
    - name
    - description
    - mandatory
    - dataType
    - enumType
    - value
    - defaultValue
    - enumItems
    - ordering
    properties:
      id:
        type: string
        description: Field id
      key:
        type: string
        description: Property key
      name:
        type: string
        description: Field name
      pattern:
        type: string
        description: Field pattern ( PATTERN_TEXT only )
      description:
        type: string
        description: Field description
      mandatory:
        type: boolean
        description: Mandatory flag
      dataType:
        $ref: '#/definitions/field.DataType'
        description: Data type of provaded value
      enumType:
        type: string
        description: Enumeration name which is type for field value
      value:
        type: string
        description: Value for corresponded property
      itemValue:
        $ref: '#/definitions/common.Item'
        description: Item value for corresponded property
      defaultValue:
        type: string
        description: Default value for corresponded property
      enumItems:
        type: array
        items:
          $ref: '#/definitions/common.Item'
        description: Combobox choices for enumeration types
      ordering:
        type: integer
        format: int32
        description: order position
  field.SubmitFieldsRequest:
    type: object
    requred:
    - contactId
    - fields
    properties:
      contactId:
        type: string
        description: Submited contact id
      fields:
        type: array
        items:
          $ref: '#/definitions/field.Field'
        description: Array of fields
  field.FieldHeading:
    type: object
    requred:
    - name
    - description
    - fields
    - ordering
    properties:
      name:
        type: string
        description: Heading name
      description:
        type: string
        description: Heading description
      fields:
        type: array
        items:
          $ref: '#/definitions/field.Field'
        description: Fields set related to field heading
      ordering:
        type: integer
        format: int32
        description: order position
  field.ContactFields:
    type: object
    requred:
    - contactId
    - headings
    properties:
      contactId:
        type: string
        description: Contact Id
      headings:
        type: array
        items:
          $ref: '#/definitions/field.FieldHeading'
        description: Related field headings
  checkout.Enrolment:
    type: object
    requred:
    - contactId
    - classId
    - price
    - warnings
    - errors
    - selected
    - fieldHeadings
    properties:
      contactId:
        type: string
      classId:
        type: string
      courseId:
        type: string
      price:
        $ref: '#/definitions/web.CourseClassPrice'
      warnings:
        type: array
        items:
         type: string
      errors:
        type: array
        items:
         type: string
      selected:
        type: boolean
      fieldHeadings:
        type: array
        items:
          $ref: '#/definitions/field.FieldHeading'
      allowRemove:
        type: boolean
      relatedClassId:
        type: string
      relatedProductId:
        type: string
  checkout.Application:
    type: object
    requred:
    - contactId
    - classId
    - warnings
    - errors
    - selected
    - fieldHeadings
    properties:
      contactId:
        type: string
      classId:
        type: string
      warnings:
        type: array
        items:
         type: string
      errors:
        type: array
        items:
         type: string
      selected:
        type: boolean
      fieldHeadings:
        type: array
        items:
          $ref: '#/definitions/field.FieldHeading'
  checkout.Article:
    type: object
    requred:
    - contactId
    - productId
    - warnings
    - errors
    - price
    - total
    - selected
    - quantity
    properties:
      contactId:
        type: string
      productId:
        type: string
      warnings:
        type: array
        items:
         type: string
      errors:
        type: array
        items:
         type: string
      price:
        type: number
      total:
        type: number
      selected:
        type: boolean
      quantity:
        type: integer
      allowRemove:
        type: boolean
      relatedClassId:
        type: string
      relatedProductId:
        type: string
      fieldHeadings:
        type: array
        items:
          $ref: '#/definitions/field.FieldHeading'
  checkout.Membership:
    type: object
    requred:
    - contactId
    - productId
    - warnings
    - errors
    - price
    - selected
    properties:
      contactId:
        type: string
      productId:
        type: string
      warnings:
        type: array
        items:
         type: string
      errors:
        type: array
        items:
         type: string
      price:
        type: number
      selected:
        type: boolean
      allowRemove:
        type: boolean
      relatedClassId:
        type: string
      relatedProductId:
        type: string
      fieldHeadings:
        type: array
        items:
          $ref: '#/definitions/field.FieldHeading'
  checkout.Voucher:
    type: object
    requred:
    - contactId
    - productId
    - warnings
    - errors
    - price
    - total
    - selected
    - isEditablePrice
    - quantity
    properties:
      contactId:
        type: string
      productId:
        type: string
      warnings:
        type: array
        items:
         type: string
      errors:
        type: array
        items:
         type: string
      price:
        type: number
      total:
        type: number
      value:
        type: number
      classes:
        type: array
        items:
          type: string
      selected:
        type: boolean
      isEditablePrice:
        type: boolean
      quantity:
        type: integer
      allowRemove:
        type: boolean
      relatedClassId:
        type: string
      relatedProductId:
        type: string
      fieldHeadings:
        type: array
        items:
          $ref: '#/definitions/field.FieldHeading'
  checkout.WaitingList:
    type: object
    requred:
    - contactId
    - courseId
    - warnings
    - errors
    - selected
    - fieldHeadings
    - studentsCount
    - detail
    properties:
      studentsCount:
        type: number
      detail:
        type: string
      contactId:
        type: string
      courseId:
        type: string
      warnings:
        type: array
        items:
         type: string
      errors:
        type: array
        items:
         type: string
      selected:
        type: boolean
      fieldHeadings:
        type: array
        items:
          $ref: '#/definitions/field.FieldHeading'
  checkout.request.ProductContainer:
      type: object
      required:
        - productId
        - quantity
      properties:
        productId:
          type: string
        quantity:
          type: integer
  checkout.request.ContactNodeRequest:
      type: object
      requred:
      - contactId
      - classIds
      - products
      - waitingCourseIds
      - promotionIds
      properties:
        contactId:
          type: string
        classIds:
          type: array
          items:
           type: string
        waitingCourseIds:
          type: array
          items:
            type: string
        products:
          type: array
          items:
            $ref: '#/definitions/checkout.request.ProductContainer'
        promotionIds:
          type: array
          items:
            type: string
  checkout.ContactNode:
    type: object
    requred:
    - contactId
    - enrolments
    - applications
    - articles
    - memberships
    - vouchers
    - waitingLists
    properties:
      contactId:
        type: string
      enrolments:
        type: array
        items:
          $ref: '#/definitions/checkout.Enrolment'
      applications:
        type: array
        items:
          $ref: '#/definitions/checkout.Application'
      articles:
        type: array
        items:
          $ref: '#/definitions/checkout.Article'
      memberships:
        type: array
        items:
          $ref: '#/definitions/checkout.Membership'
      vouchers:
        type: array
        items:
          $ref: '#/definitions/checkout.Voucher'
      waitingLists:
        type: array
        items:
          $ref: '#/definitions/checkout.WaitingList'
      suggestedCourseIds:
        type: array
        items:
          type: string
      suggestedProductIds:
        type: array
        items:
          type: string
  checkout.VoucherPayment:
    type: object
    properties:
      redeemVoucherProductId:
        type: string
      redeemVoucherId:
        type: string
      name:
        type: string
      amount:
        type: number
  checkout.Amount:
    type: object
    properties:
      total:
        type: number
        description: total price excluding discounts
      discount:
        type: number
        description: total discount amount
      subTotal:
        type: number
        description: total price including discounts (discounted price)
      minPayNow:
        type: number
        description: min amount that user need to pay for invoice/invoices (can be less than subTotal if payment plan invoices precented)
      payNow:
        type: number
        description: actual amount allocated for invoice/invoices (equalse subTotal if payment plan invoices not presented)
      isEditable:
        type: boolean
        description: true if minPayNow less that subTotal
      voucherPayments:
        type: array
        description: voucher payments list - appears if redeem any kind of vouchers
        items:
          $ref: '#/definitions/checkout.VoucherPayment'
      credit:
        type: number
        description: credit amount that will be used to pay for current invoice/invoices (students credit notes)
      ccPayment:
        type: number
        description: amount paid by card
      owing:
        type: number
        description: outstanding owing amount

  checkout.CheckoutModel:
    type: object
    properties:
      error:
        $ref: '#/definitions/common.CommonError'
      validationErrors:
        $ref: '#/definitions/common.ValidationError'
      contactNodes:
        type: array
        items:
          $ref: '#/definitions/checkout.ContactNode'
      amount:
        $ref: '#/definitions/checkout.Amount'
      payerId:
        type: string
  checkout.CheckoutModelRequest:
    type: object
    properties:
      contactNodes:
        type: array
        items:
          $ref: '#/definitions/checkout.ContactNode'
      promotionIds:
        type: array
        items:
          type: string
      redeemedVoucherIds:
        type: array
        items:
          type: string
      redeemedVoucherProductIds:
        type: array
        items:
          type: string
      payerId:
        type: string
      applyCredit:
        type: boolean
      payNow:
        type: number
        description: aclyal amount allocated for invoice/invoices (equalse subTotal if payment plan invoices not presented)
      corporatePassId:
        type: string
  checkout.payment.PaymentRequest:
    type: object
    properties:
      checkoutModelRequest:
        $ref: '#/definitions/checkout.CheckoutModelRequest'
      creditCardNumber:
        type: string
      creditCardName:
        type: string
      expiryMonth:
        type: string
      expiryYear:
        type: string
      creditCardCvv:
        type: string
      agreementFlag:
        type: boolean
      sessionId:
        type: string
        description: String length 16 of hexadecimal digits
      ccAmount:
        description: Amount allocated for credit card payment
        type: number
  v2.checkout.payment.PaymentRequest:
    type: object
    properties:
      checkoutModelRequest:
        $ref: '#/definitions/checkout.CheckoutModelRequest'
      merchantReference:
        type: string
      sessionId:
        type: string
        description: String length 16 of hexadecimal digits
      ccAmount:
        description: Amount allocated for credit card payment
        type: number
      storeCard:
        type: boolean
        description: save CC details to proc
  checkout.payment.PaymentStatus:
    type: string
    enum:
      - IN_PROGRESS
      - FAILED
      - SUCCESSFUL
      - UNDEFINED
      - SUCCESSFUL_WAITING_COURSES
      - SUCCESSFUL_BY_PASS
  checkout.payment.PaymentResponse:
    type: object
    properties:
      sessionId:
        type: string
      status:
        $ref: '#/definitions/checkout.payment.PaymentStatus'
      reference:
        type: string
  v2.checkout.payment.PaymentResponse:
    type: object
    properties:
      sessionId:
        type: string
      merchantReference:
        type: string
      status:
        $ref: '#/definitions/checkout.payment.PaymentStatus'
      reference:
        type: string
      responseText:
        type: string
      paymentFormUrl:
        type: string
  checkout.concession.ConcessionType:
    type: object
    properties:
      id:
        type: string
      name:
        type: string
      hasExpireDate:
        type: boolean
      hasNumber:
        type: boolean
  checkout.concession.Concession:
    type: object
    properties:
      concessionTypeId:
        type: string
      contactId:
        type: string
      name:
        type: string
      expiryDate:
         type: string
      number:
        type: string
  checkout.StudentMembership:
    type: object
    properties:
      contactId:
        type: string
      name:
        type: string
  checkout.ConcessionsAndMemberships:
    type: object
    properties:
      concessions:
        type: array
        items:
          $ref: '#/definitions/checkout.concession.Concession'
      memberships:
        type: array
        items:
          $ref: '#/definitions/checkout.StudentMembership'
  checkout.RedeemVoucher:
    type: object
    properties:
      id:
        type: string
      payer:
         $ref: '#/definitions/web.Contact'
      name:
        type: string
      code:
        type: string
  checkout.CodeResponse:
    type: object
    properties:
      promotion:
        $ref: '#/definitions/web.Promotion'
      voucher:
        $ref: '#/definitions/checkout.RedeemVoucher'
  checkout.CreateParentChildrenRequest:
    type: object
    properties:
      parentId:
        type: string
      childrenIds:
        type: array
        items:
          type: string
  checkout.corporatepass.GetCorporatePassRequest:
    type: object
    properties:
      code:
        type: string
      classIds:
        type: array
        items:
          type: string
      productIds:
        type: array
        items:
          type: string
  checkout.corporatepass.MakeCorporatePassRequest:
    type: object
    properties:
      checkoutModelRequest:
        $ref: '#/definitions/checkout.CheckoutModelRequest'
      agreementFlag:
        type: boolean
      corporatePassId:
        type: string
      reference:
        type: string
  checkout.corporatepass.CorporatePass:
    type: object
    properties:
      id:
        type: string
      code:
        type: string
      message:
        type: string
      email:
        type: string
      name:
        type: string
