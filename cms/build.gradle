apply plugin: 'war'

dependencies {
	providedCompile 'javax.servlet:servlet-api:2.5'

	compile project(':common:common-services')
	compile project(':common:common-model')
	compile project(':common:common-ui')

	compile 'commons-collections:commons-collections:3.2.1'
	compile 'commons-logging:commons-logging:1.1.1'
	compile 'org.apache.tapestry:tapestry-core:5.2.6'
	compile 'org.apache.tapestry:tapestry-json:5.2.6'
	compile 'org.apache.tapestry:tapestry-upload:5.2.6'
	compile 'opensymphony:oscache:2.4.1'
    compile 'io.milton:milton-api:2.6.0.1'
    compile 'io.milton:milton-server-ce:2.6.0.1'
    compile 'org.reflections:reflections:0.9.8'

	testCompile 'org.apache.tapestry:tapestry-test:5.2.6'

	// The odd next line is to work around gradle pulling in the wrong configuration
	// http://forums.gradle.org/gradle/topics/transitive_libraries_not_included_through_project_dependency
	testCompile project(path: ':common:common-test', configuration: 'testFixtures')
}

war {
	archiveName = 'cms.war'
	manifest {
		from sharedManifest
	}
}