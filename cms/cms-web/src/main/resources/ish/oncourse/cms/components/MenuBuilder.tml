<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<t:container xmlns:t="http://tapestry.apache.org/schema/tapestry_5_1_0.xsd" xmlns:p="tapestry:parameter">	
	
	<input type="submit" name="serialize" id="serialize" value="SerializeTTTT" />

	<p id="serializeOutput"></p>

	<button class="awesome blue large cms_add_menuitem">Add a new menu item</button> <br/>
	
	<li class="hidden cms_newmenuitem">
		<div>
			<div class="cms_pagename">New menu item</div>
			<div class="cms_refurl"></div>
			<div class="cms_draghandle ui-icon ui-icon-arrowthick-2-n-s"></div>
			<div class="cms_delete_icon"><a id="" style="text-decoration: none; color: black;"><span class="ui-icon ui-icon-trash left"></span>Delete</a></div>
		</div>
	</li>
	
	<ol class="cms_navmenu_list cms_draggable cms_sortable">
		
		<t:loop source="rootMenu.navigableChildMenus" value="currentMenu">
			<t:delegate to="menuItem"/>
		</t:loop>
		
	    <t:block>
	        <div t:id="menuItem">
	            <t:delegate to="menuItem"/>
	        </div>
	    </t:block>
	    
	</ol>
	
	<script type="text/javascript">
		jQuery(function(){
			jQuery.menubuilder(${suggestResults});
			
			jQuery('#serialize').click(function(){
				var serialized = jQuery('ol.cms_sortable').nestedSortable('serialize');
				jQuery('#serializeOutput').text(serialized);
			});
		});
	</script>
</t:container>