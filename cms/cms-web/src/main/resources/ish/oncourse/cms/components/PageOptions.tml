<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<t:container xmlns:t="http://tapestry.apache.org/schema/tapestry_5_1_0.xsd" xmlns:p="tapestry:parameter">
	<div id="pgOptions" style="display: none;">
	    <t:form t:id="optionsForm" zone="prop:updateZone.clientId">
	    	<t:errors/>
			<t:label for="pageName"></t:label><t:textfield t:id="pageName" t:value="node.name" t:validate="required,minlength=3"/><br/>
			<t:label for="pageType"/><t:select t:id="pageType" name="pageType" model="pageTypeModel" encoder="pageTypeModel" value="node.webNodeType"/><br/>
			<t:label for="published"/><t:checkbox t:id="published" value="node.published"/>
		</t:form>
	    
	    URLs
    	<ul>
    		<t:zone t:id="urlZone">
    			<t:if t:test="hasDefault">
    				<li style="line-height: 1.2em">${siteUrl}${node.defaultWebURLAlias.urlPath}<img src="/s/img/arrow_left.png" border="0" style="vertical-align: middle;"/></li>
    			</t:if>
		    	<t:loop source="prop:node.webUrlAliases" value="prop:webUrlAlias">
		    			<t:if t:test="notDefault">
		    				<li style="line-height: 1.2em">
		    					${siteUrl}${webUrlAlias.urlPath} 
		    					<a t:id="removeUrl" t:type="actionLink" t:context="webUrlAlias.id" zone="urlZone"><img src="/s/img/trash_16.gif" border="0" style="vertical-align: middle;"/></a>
		    					<img src="/s/img/arrow_left.png" border="0" style="vertical-align: middle;"/><a t:id="makeDefault" t:type="actionLink" t:context="webUrlAlias.id" zone="urlZone">&nbsp;default</a>
		    				</li>
		    			</t:if>
		    	</t:loop>
	    	</t:zone>
	    	<li>
		    	<t:form t:id="urlForm" zone="urlZone">
	    			${siteUrl}<t:textfield value="urlPath"/><a href="#" t:type="linkSubmit" t:id="addUrl"><img src="/s/img/add.png" border="0"/></a>
	    		</t:form>
    		</li>
      </ul>
	</div>
	
	<script type="text/javascript">
	    function openPageOptionsDialog() {
	    	jQuery("#pgOptions").dialog({modal:true, height: 430, width: 530, 
				buttons: { 
					"Done": function() {
						$('${optionsForm.clientId}').fire(Tapestry.FORM_PROCESS_SUBMIT_EVENT);
						jQuery(this).dialog("close");
					}
				}	
			});
	    }
	</script>
	
</t:container>