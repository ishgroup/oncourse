<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<t:container xmlns:t="http://tapestry.apache.org/schema/tapestry_5_1_0.xsd" xmlns:p="tapestry:parameter">
	<div class="cms-content">

		<t:form t:id="pageTypeEditForm" zone="pageTypeZone">
            <div class="cms-main-head">
                <div class="cms-main-title">
                    <h1 class="cms-page-title">Edit Theme</h1>
                </div>
            </div>

			<div class="cms-theme-title">
				
				<t:errors class="literal:cms-error-txt"/>	
                <div class="cms-theme-title-n clearfix">
                	<label for="themeName">Name</label>
                	<t:if test="isSpecialType" negate="true">
                		<t:textfield t:id="name" clientId="themeName" t:value="editPageType.name" t:validate="required" maxlength="500" class="cms-span3"/>
                		<p:else>
                			<input class="cms-span3 cms-disabled" disabled="disabled" value="${editPageType.name}"/>
                		</p:else>
                    </t:if>

                </div>

                <div class="cms-theme-title-k">
                    <label>Layout key</label>

                    <div class="cms-theme-key-wr">
                        <!--  div class="cms-theme-key" id="cmsThemeKey"></div-->
                        <t:select t:id="layoutKey" name="layoutKey" model="layoutSelectModel" encoder="layoutSelectModel" t:validate="required" value="editPageType.layoutKey"/>
                    </div>
                </div>
				
            </div>


            <div class="cms-theme-main">
                <div class="cms-theme-main-l">
                    <p><strong>Current layout</strong> Drag &amp; drop blocks from the right column
                    </p><br/>

                    <table class="cms-theme-layout">
                        <tr>
                            <td class="header" colspan="3">
								<ul id="b_header" class="cms-theme-list-m sortableThemes">
									<t:loop source="headerBlocks" value="block" formState="none">
										<li id="bl_${block.id}" class="cms-well"><i class="cms-icon-move"></i>${block.name}</li>
									</t:loop>
								</ul>
                            </td>
                        </tr>
                        <tr>
                            <td class="left">
								<ul id="b_left" class="cms-theme-list-m sortableThemes">
									<t:loop source="leftBlocks" value="block" formState="none">
										<li id="bl_${block.id}" class="cms-well"><i class="cms-icon-move"></i>${block.name}</li>
									</t:loop>
								</ul>
                            </td>
                            <td class="center">
								<ul id="b_content" class="cms-theme-list-m sortableThemes">
									<t:loop source="centerBlocks" value="block" formState="none">
										<li id="bl_${block.id}" class="cms-well"><i class="cms-icon-move"></i>${block.name}</li>
									</t:loop>
								</ul>
							</td>
                            <td class="right">
								<ul id="b_right" class="cms-theme-list-m sortableThemes">
									<t:loop source="rightBlocks" value="block" formState="none">
										<li id="bl_${block.id}" class="cms-well"><i class="cms-icon-move"></i>${block.name}</li>
									</t:loop>
								</ul>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3" class="footer">

                                <ul id="b_footer" class="cms-theme-list-m sortableThemes">
									<t:loop source="footerBlocks" value="block" formState="none">
										<li id="bl_${block.id}" class="cms-well"><i class="cms-icon-move"></i>${block.name}</li>
									</t:loop>
								</ul>


                            </td>
                        </tr>
                    </table>


                </div>
                <div class="cms-theme-main-r">
                    <p><strong>Unassigned</strong> blocks<br/>
                        (drag them to the layout on the left)
                    </p>

					<div id="scrollTheme" class="cms-theme-modules">
                        <span class="cms-theme-modul-u buttons prev"></span>

                        <div class="viewport">
                        	<ul id="b_unassigned" class="overview sortableThemes">
									<t:loop source="unassignedBlocks" value="block" formState="none">
										<li id="bl_${block.id}" class="cms-well"><i class="cms-icon-move"></i>${block.name}</li>
									</t:loop>
								</ul>
                        </div>


                        <span class="cms-theme-modul-d buttons next"></span>
                    </div>

                </div>

            </div>


            <div class="cms-btns container-fluid">
            	<t:submit t:id="cancel" value="Cancel" mode="CANCEL" class="cms-btn"/>
				<t:submit t:id="save" value="Save" class="cms-btn cms-btn-primary"/>
            </div>

		</t:form>
		<t:actionlink t:id="sort"/>
		<script type="text/javascript">
			customForms();
			sortThemes();
		</script>
    </div>
	

</t:container>